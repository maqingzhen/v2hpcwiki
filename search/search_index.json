{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u6b22\u8fce\u6765\u5230 V2HPC Wiki \u5c0f\u7ad9 \u8fd9\u4e2a\u5c0f\u7ad9\u4e3b\u8981\u8bd5\u56fe\u901a\u8fc7\u91cd\u65b0\u6574\u7406\u3001\u7ec4\u7ec7\u3001\u5206\u4eab\u4e2a\u4eba\u5728 HPC \u7528\u6237\u652f\u6301\u8fc7\u7a0b\u4e2d\u79ef\u7d2f\u7684\u4e00\u4e9b\u6750\u6599\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u670d\u52a1 HPC \u7528\u6237\u548c\u5bf9 HPC \u5e94\u7528\u611f\u5174\u8da3\u7684\u670b\u53cb\u3002\u8bd5\u7528 HPC \u8d44\u6e90\u8bf7\u767b\u5f55\u5929\u6d25\u8d85\u7b97\u4e2d\u5fc3 \u5b98\u65b9\u7f51\u7ad9 \u6216\u76f4\u63a5\u70b9\u51fb \u7528\u6237\u7533\u8bf7 \u3002 \u4e3b\u8981\u5185\u5bb9\uff1a \u7528\u6237\u624b\u518c: \u4ee5ft2000+\u7cfb\u7edf\u4e3a\u4f8b\uff0c\u4ecb\u7ecd\u8d85\u7ea7\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u4f7f\u7528 \u5e94\u7528\u90e8\u7f72: \u4ecb\u7ecdspack HPC\u5e94\u7528\u7ba1\u7406\u7cfb\u7edf\u4ee5\u53ca\u5e38\u89c1HPC\u5e94\u7528\u7684\u90e8\u7f72\u65b9\u6cd5 \u8f6f\u4ef6\u4f7f\u7528: \u4ecb\u7ecdLinux\u7cfb\u7edf\u4e0b\u4e00\u4e9b\u5e38\u7528\u5de5\u5177\u7684\u4f7f\u7528\u6280\u5de7\uff0c\u63d0\u5347\u5de5\u4f5c\u6548\u7387 \u7f51\u7ad9\u5206\u4eab\uff1a\u5206\u4eab\u4e00\u4e9b\u4e2a\u4eba\u8ba4\u4e3a\u6bd4\u8f83\u6709\u4ef7\u503c\u7684\u4e2a\u4eba\u535a\u5ba2\u6216\u8005\u7f51\u7ad9","title":"\u9996\u9875"},{"location":"#v2hpc-wiki","text":"\u8fd9\u4e2a\u5c0f\u7ad9\u4e3b\u8981\u8bd5\u56fe\u901a\u8fc7\u91cd\u65b0\u6574\u7406\u3001\u7ec4\u7ec7\u3001\u5206\u4eab\u4e2a\u4eba\u5728 HPC \u7528\u6237\u652f\u6301\u8fc7\u7a0b\u4e2d\u79ef\u7d2f\u7684\u4e00\u4e9b\u6750\u6599\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u670d\u52a1 HPC \u7528\u6237\u548c\u5bf9 HPC \u5e94\u7528\u611f\u5174\u8da3\u7684\u670b\u53cb\u3002\u8bd5\u7528 HPC \u8d44\u6e90\u8bf7\u767b\u5f55\u5929\u6d25\u8d85\u7b97\u4e2d\u5fc3 \u5b98\u65b9\u7f51\u7ad9 \u6216\u76f4\u63a5\u70b9\u51fb \u7528\u6237\u7533\u8bf7 \u3002","title":"\u6b22\u8fce\u6765\u5230 V2HPC Wiki \u5c0f\u7ad9"},{"location":"#_1","text":"\u7528\u6237\u624b\u518c: \u4ee5ft2000+\u7cfb\u7edf\u4e3a\u4f8b\uff0c\u4ecb\u7ecd\u8d85\u7ea7\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u4f7f\u7528 \u5e94\u7528\u90e8\u7f72: \u4ecb\u7ecdspack HPC\u5e94\u7528\u7ba1\u7406\u7cfb\u7edf\u4ee5\u53ca\u5e38\u89c1HPC\u5e94\u7528\u7684\u90e8\u7f72\u65b9\u6cd5 \u8f6f\u4ef6\u4f7f\u7528: \u4ecb\u7ecdLinux\u7cfb\u7edf\u4e0b\u4e00\u4e9b\u5e38\u7528\u5de5\u5177\u7684\u4f7f\u7528\u6280\u5de7\uff0c\u63d0\u5347\u5de5\u4f5c\u6548\u7387 \u7f51\u7ad9\u5206\u4eab\uff1a\u5206\u4eab\u4e00\u4e9b\u4e2a\u4eba\u8ba4\u4e3a\u6bd4\u8f83\u6709\u4ef7\u503c\u7684\u4e2a\u4eba\u535a\u5ba2\u6216\u8005\u7f51\u7ad9","title":"\u4e3b\u8981\u5185\u5bb9\uff1a"},{"location":"about/","text":"\u5efa\u8bbe\u4e2d \u2026\u2026","title":"\u5173\u4e8e"},{"location":"about/#_1","text":"","title":"\u5efa\u8bbe\u4e2d \u2026\u2026"},{"location":"environment/ft2000%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AECESM%E7%94%A8%E6%88%B7%E7%8E%AF%E5%A2%83/","text":"spack install perl-xml-libxml ^perl@5.20.3 spack install perl-switch@2.16 ^perl@5.16.3 spack install esmf@7.1.0r ^netcdf-c+parallel-netcdf ^hdf5+fortran+szip ^perl@5.20.3","title":"ft2000\u7cfb\u7edf\u914d\u7f6eCESM\u7528\u6237\u73af\u5883"},{"location":"environment/spack-tutorial/","text":"\u672c\u6587\u8bb0\u5f55\u6574\u7406Spack(HPC\u7cfb\u7edf\u5e94\u7528\u8f6f\u4ef6\u7ba1\u7406\u5de5\u5177)\u7684\u4f7f\u7528\u8bf4\u660e\u3002 Spack \u7b80\u4ecb Spack \u662f\u4e00\u6b3e\u5f3a\u5927\u7684\u8f6f\u4ef6\u5305\u7ba1\u7406\u5de5\u5177 \u964d\u4f4e\u4e86\u5e94\u7528\u8f6f\u4ef6\u7684\u5b89\u88c5\u96be\u5ea6\uff08\u6e90\u7801\u7f16\u8bd1\uff0c\u4e8c\u8fdb\u5236\u5305\u5b89\u88c5\uff09 \u89e3\u51b3\u8f6f\u4ef6\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff08\u786e\u4fdd\u6784\u5efa\u7684\u4e00\u81f4\u6027\uff09 \u8f6f\u4ef6\u5c42\u7684\u6784\u5efa\u7cfb\u7edf\uff08\u8f6f\u4ef6+\u9009\u9879/\u529f\u80fd\uff0c\u533a\u522b\u4e8eCMake\uff0cMake\uff09 Spack \u5b89\u88c5 ## \u5b89\u88c5 spack \u4ee3\u7801\u5305 > git clone https://github.com/spack/spack.git ## \u521d\u59cb\u5316 spack \u73af\u5883 > source spack/share/spack/setup-env.sh Spack \u73af\u5883\u914d\u7f6e \u628a\u5982\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230 ~/.bashrc \u6216\u8005 ~/.bash_profile \u6587\u4ef6\u4e2d\u3002 # .bashrc ulimit -l unlimited ulimit -s unlimited # Module package management source /THL8/software/modules/3.2.10/Modules/3.2.10/init/bash module purge # Spack package management export SPACK_ROOT=/THL8/software/opt/spack export PATH=$SPACK_ROOT/bin:$PATH source ${SPACK_ROOT}/share/spack/setup-env.sh \u67e5\u770b Spack \u5df2\u5b89\u88c5\u8f6f\u4ef6 > spack find -l [software name] \u9009\u9879\u8bf4\u660e\uff1a -p, --paths \u663e\u793a\u8f6f\u4ef6\u5b89\u88c5\u8def\u5f84 -d, --deps \u663e\u793a\u8f6f\u4ef6\u5b8c\u6574\u7684\u4f9d\u8d56\u5173\u7cfb\u56fe\uff08\u6709\u5411\u65e0\u73af\u56fe) -l, --long \u663e\u793a\u8f6f\u4ef6spec\u7684hash\u503c\u548c\u7248\u672c\u53f7 -f, --show-flags \u663e\u793a\u8f6f\u4ef6\u5b89\u88c5\u65f6\u7684\u7f16\u8bd1\u5668\u9009\u9879 -x, --explicit \u663e\u793a\u76f4\u63a5\u5b89\u88c5\u7684\u8f6f\u4ef6 -X, --implicit \u663e\u793a\u4f5c\u4e3a\u4f9d\u8d56\u5b89\u88c5\u7684\u8f6f\u4ef6 -v, --variants \u663e\u793a\u8f6f\u4ef6\u7684\u5b89\u88c5\u9009\u9879 software name \u6307\u5b9a\u8f6f\u4ef6\u540d\u79f0\uff0c\u67e5\u770b\u8be5\u8f6f\u4ef6\u8be6\u7ec6\u4fe1\u606f\uff08hash\u503c\uff0c\u7248\u672c\uff0c\u4f9d\u8d56\uff0c\u5b89\u88c5\u9009\u9879\uff0c\u7f16\u8bd1\u9009\u9879\uff09 \u5df2\u5b89\u88c5\u8f6f\u4ef6\u7684\u52a0\u8f7d \u628a\u5982\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230 ~/.bashrc \u6216\u8005 ~/.bash_profile \u6587\u4ef6\u4e2d\uff0c\u5373\u53ef\u5b8c\u6210\u5bf9intel\u7f16\u8bd1\u566819.0.5\u7248\u672c\uff0cminiconda2\u7684 4.7.12.1\u7248\u672c\uff0cfftw\u76843.3.8\u7248\u672c\u548cnetcdf-fortran\u76844.5.2\u7248\u672c\u7684\u5b89\u88c5\u3002 # Spack package load source <(spack module tcl loads --dependencies /w5ky76k) # intel@19.0.5 source <(spack module tcl loads --dependencies /s6pzrxk) # miniconda2@4.7.12.1 source <(spack module tcl loads --dependencies /pomc2sx) # fftw@3.3.8 source <(spack module tcl loads --dependencies /xpyelbb) # netcdf-fortran@4.5.2 \u5176\u4e2d --dependencies \u662f\u6307\u540c\u65f6\u52a0\u8f7d\u8be5\u8f6f\u4ef6\u7684\u4f9d\u8d56\uff0c/xpyelbb \u662fnetcdf-fortran@4.5.2\u7684\u5b89\u88c5\u7248\u672c\u7684hash\u503c\u3002\u914d\u7f6e\u5b8c ~/.bashrc \u6216\u8005 ~/.bash_profile \u6587\u4ef6\u540e\uff0c\u901a\u8fc7source \u66f4\u65b0\u73af\u5883\uff0c\u5373\u53ef\u5b8c\u6210\u76f8\u5173\u8f6f\u4ef6\u7684\u52a0\u8f7d\uff0c\u53ef\u4ee5\u901a\u8fc7 module list \u67e5\u770b (base) demo@ubuntu:~/github/spack$ module list Currently Loaded Modulefiles: 1) intel-19.0.5-gcc-8.3.0-w5ky76k 9) rdma-core-20-gcc-8.3.0-4hecl3d 2) miniconda2-4.7.12.1-intel-19.0.5-s6pzrxk 10) slurm-16.05.7-intel-19.0.5-rmgee6m 3) libpciaccess-0.13.5-intel-19.0.5-p4yolyz 11) mvapich2-2.3.4-intel-19.0.5-23edecg 4) libiconv-1.16-gcc-8.3.0-hgw6qbv 12) fftw-3.3.8-intel-19.0.5-pomc2sx 5) xz-5.2.5-intel-19.0.5-t7exvpq 13) mvapich2-2.3.4-intel-19.0.5-tgxj347 6) zlib-1.2.11-intel-19.0.5-onq52rg 14) hdf5-1.10.6-intel-19.0.5-3y4zybv 7) libxml2-2.9.10-intel-19.0.5-ososnes 15) netcdf-c-4.7.3-intel-19.0.5-mz4yici 8) libnl-3.3.0-gcc-8.3.0-esj5mge 16) netcdf-fortran-4.5.2-intel-19.0.5-xpyelbb \u5e94\u7528\u8f6f\u4ef6\u7684\u5b89\u88c5 \u51c6\u5907\u5de5\u4f5c\u2014\uff1a\u8f6f\u4ef6\u641c\u7d22 \u8981\u4f7f\u7528 spack \u5b89\u88c5\u4e00\u6b3e\u79d1\u5b66\u8ba1\u7b97\u8f6f\u4ef6\uff0c\u9996\u9009\u8981\u786e\u5b9a spack \u8f6f\u4ef6\u5e93\u4e2d\u662f\u5426\u5df2\u7ecf\u5305\u542b\u8fd9\u6b3e\u8f6f\u4ef6\uff0c\u786e\u8ba4\u7684\u529e\u6cd5\u5c31\u662f\u4f7f\u7528 spack list \u52a0\u8f6f\u4ef6\u540d\u641c\u7d22\uff0c\u6bd4\u5982\u6211\u4eec\u8981\u5b89\u88c5 netcdf \uff0c\u4f7f\u7528 spack list netcdf \u641c\u7d22\u5f97\u5230\u5982\u4e0b\u7ed3\u679c\uff1a (base) demo@ubuntu:~/github/spack$ spack list netcdf ==> 6 packages. netcdf-c netcdf-cxx netcdf-cxx4 netcdf-fortran parallel-netcdf py-netcdf4 \u5982\u679cspack \u8fd8\u4e0d\u652f\u6301\u8be5\u8f6f\u4ef6\uff0c\u4e5f\u5c31\u662f\u8f6f\u4ef6\u5e93\u4e2d\u8fd8\u6ca1\u6709\uff0c\u6bd4\u5982wrf\uff0c\u641c\u7d22\u7ed3\u679c\u4f1a\u5982\u4e0b\u6240\u793a\uff1a (base) demo@ubuntu:~/github/spack$ spack info wrf ==> Error: Package wrf not found. \u4e0d\u8fc7\u6709\u65f6\u641c\u7d22\u4e0d\u5230\u4e0d\u662f\u56e0\u4e3aspack \u5e93\u4e2d\u6ca1\u6709\uff0c\u800c\u662fspack\u4e2d\u4fee\u6539\u4e86\u8f6f\u4ef6\u7684\u540d\u5b57\u3002\u8fd9\u65f6\u53ef\u4ee5\u901a\u8fc7\u641c\u7d22\u8f6f\u4ef6\u63cf\u8ff0\u6765\u67e5\u627e\u8f6f\u4ef6\uff0c\u6bd4\u5982\u6211\u4eec\u67e5\u627e geophysical \u76f8\u5173 \u7684\u8f6f\u4ef6\uff1a (base) demo@ubuntu:~/github/spack$ spack list geophysical ==> 0 packages. (base) demo@ubuntu:~/github/spack$ spack list --search-description geophysical ==> 1 packages. spherepack \u76f4\u63a5\u7528 spack list \u67e5\u627e\u662f\u6ca1\u6709\uff0c\u4f46\u662f\u52a0\u4e0a --search-description \u9009\u9879\u5c31\u53ef\u4ee5\u627e\u5230\u4e00\u4e2a\u53eb\u505aspherepack\u7684\u8f6f\u4ef6\u5305\u3002 \u51c6\u5907\u5de5\u4f5c\u4e8c\uff1a\u67e5\u770b\u8f6f\u4ef6\u8be6\u7ec6\u4fe1\u606f \u6709\u65f6\u5373\u4fbf\u8f6f\u4ef6\u5e93\u4e2d\u5305\u542b\u4e86\u4f60\u60f3\u5b89\u88c5\u7684\u8f6f\u4ef6\uff0c\u4e5f\u4e0d\u5fc5\u7740\u6025\u5b89\u88c5\uff0c\u660e\u667a\u7684\u505a\u6cd5\u662f\u5148\u4f7f\u7528 spack info package \u547d\u4ee4\u67e5\u770bspack\u4e2d\u5bf9\u8f6f\u4ef6\u7684\u63cf\u8ff0\uff0c\u8fd8\u662f\u4ee5 netcdf-c \u4e3a\u4f8b\uff1a (base) demo@ubuntu:~/github/spack$ spack info netcdf-c AutotoolsPackage: netcdf-c Description: NetCDF (network Common Data Form) is a set of software libraries and machine-independent data formats that support the creation, access, and sharing of array-oriented scientific data. This is the C distribution. Homepage: http://www.unidata.ucar.edu/software/netcdf Maintainers: @skosukhin @WardF Tags: None Preferred version: 4.7.3 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.7.3.tar.gz Safe versions: master [git] https://github.com/Unidata/netcdf-c.git on branch master 4.7.3 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.7.3.tar.gz 4.7.2 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.7.2.tar.gz 4.7.1 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.7.1.tar.gz 4.7.0 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.7.0.tar.gz 4.6.3 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.6.3.tar.gz 4.6.2 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.6.2.tar.gz 4.6.1 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.6.1.tar.gz 4.6.0 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.6.0.tar.gz 4.5.0 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.5.0.tar.gz 4.4.1.1 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.4.1.1.tar.gz 4.4.1 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.4.1.tar.gz 4.4.0 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.4.0.tar.gz 4.3.3.1 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.3.3.1.tar.gz 4.3.3 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.3.3.tar.gz Variants: Name [Default] Allowed values Description ===================== ============== =============================== dap [off] on, off Enable DAP support hdf4 [off] on, off Enable HDF4 support jna [off] on, off Enable JNA support mpi [on] on, off Enable parallel I/O for netcdf-4 parallel-netcdf [off] on, off Enable parallel I/O for classic files pic [on] on, off Produce position-independent code (for shared libs) shared [on] on, off Enable shared library Installation Phases: autoreconf configure build install Build Dependencies: autoconf curl hdf5 m4 parallel-netcdf automake hdf libtool mpi zlib Link Dependencies: curl hdf hdf5 mpi parallel-netcdf zlib Run Dependencies: None Virtual Packages: None \u8fd9\u91cc\u7ed9\u51fa\u4e86netcdf-c\u8f6f\u4ef6\u7684\u7b80\u8981\u4ecb\u7ecd\uff0c\u652f\u6301\u7684\u7248\u672c\uff0c\u652f\u6301\u7684\u5b89\u88c5\u9009\u9879\uff0c\u5b89\u88c5\u6b65\u9aa4\uff0c\u8f6f\u4ef6\u5b89\u88c5\u7684\u4f9d\u8d56\u548c\u94fe\u63a5\u7684\u4f9d\u8d56\u3002\u8fd9\u91cc\u9700\u8981\u91cd\u70b9\u5173\u6ce8\u7684\u662f\u4e24\u4e2a\uff0c\u4e00\u662f\u8f6f\u4ef6\u7684\u7248\u672c\uff0c\u8fd9\u4e2a\u6839\u636e\u7528\u6237\u9700\u6c42\u786e\u5b9a\uff1b\u4e8c\u662fVariants\uff0c\u5373\u5b89\u88c5\u7684\u9009\u9879\u3002\u4f8b\u5982\u662f\u5426\u652f\u6301mpi\uff0c\u662f\u5426\u652f\u6301\u5e76\u884cI/O\u7b49\u7b49\u3002 \u51c6\u5907\u5de5\u4f5c\u4e09\uff1a\u67e5\u770b\u8f6f\u4ef6 spec (base) demo@ubuntu:~/github/spack$ spack spec -Il netcdf-c %gcc@8.3.0 arch=linux-rhel7-haswell Input spec -------------------------------- - netcdf-c%gcc@8.3.0 arch=linux-rhel7-haswell Concretized -------------------------------- - fisfeqj netcdf-c@4.7.3%gcc@8.3.0 cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" ~dap~hdf4~jna+mpi~parallel-netcdf+pic+shared arch=linux-rhel7-haswell - p6z4wf2 ^hdf5@1.10.6%gcc@8.3.0 cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" ~cxx~debug~fortran+hl+mpi+pic+shared~szip~threadsafe api=none arch=linux-rhel7-haswell [+] 45jo6ul ^mpich@3.2%gcc@8.3.0 cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" +hwloc+hydra+libxml2+pci+romio~slurm~verbs+wrapperrpath device=ch3 netmod=tcp pmi=pmi arch=linux-rhel7-haswell [+] bpwxbl3 ^zlib@1.2.11%gcc@8.3.0 cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" +optimize+pic+shared arch=linux-rhel7-haswell [+] rahvynl ^m4@1.4.18%gcc@8.3.0 cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" +sigsegv patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 arch=linux-rhel7-haswell [+] zcmcitr ^libsigsegv@2.12%gcc@8.3.0 cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" arch=linux-rhel7-haswell \u8fd9\u91cc\u7684-I\u9009\u9879\u663e\u793a\u76ee\u6807\u8f6f\u4ef6\u548c\u4f9d\u8d56\u8f6f\u4ef6\u7684\u5b89\u88c5\u72b6\u6001\uff0c- \u8868\u793a\u672a\u5b89\u88c5\uff0c[+]\u8868\u793a\u5df2\u7ecf\u5b89\u88c5\uff1b-l\u9009\u9879\u7ed9\u51fa\u4f9d\u8d56\u7684hash\u503c\u4ee5\u53ca\u7248\u672c\u4fe1\u606f\uff1b%gcc@8.3.0 \u6307\u5b9a\u4f7f\u7528gcc 8.3.0\u7f16\u8bd1\u5668\u7f16\u8bd1\u5b89\u88c5\uff0carch=linux-rhel7-haswell \u6307\u660e\u7cfb\u7edf\u7684\u67b6\u6784\u662fhaswell\uff0c\u64cd\u4f5c\u7cfb\u7edf\u662flinux\uff0c\u53d1\u884c\u7248\u662frhel7\u3002 \u67e5\u770bspec \u7684\u76ee\u7684\u662f\u786e\u8ba4\u8be5\u7248\u672c\u7684\u8f6f\u4ef6\u80fd\u5426\u5b89\u88c5\uff0c\u4ee5\u6765\u662f\u5426\u6ee1\u8db3\uff0c\u4ee5\u53ca\u4f9d\u8d56\u8f6f\u4ef6\u7684\u5b89\u88c5\u72b6\u6001\u3002 \u6700\u7ec8\u7684\u5de5\u4f5c\uff1a\u8f6f\u4ef6\u5b89\u88c5 (base) demo@ubuntu:~/github/spack$ spack install netcdf-c %gcc@8.3.0 arch=linux-rhel7-haswell ==> mpich@3.2 : externally installed in /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/mpich-3.2-24zn2tm [+] /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/mpich-3.2-24zn2tm [+] /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/zlib-1.2.11-bpwxbl3 [+] /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/libsigsegv-2.12-zcmcitr ==> Installing hdf5 ==> No binary for hdf5 found: installing from source ==> hdf5: Executing phase: 'autoreconf' ==> hdf5: Executing phase: 'configure' ==> hdf5: Executing phase: 'build' ==> hdf5: Executing phase: 'install' [+] /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/hdf5-1.10.6-p6z4wf2 [+] /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/m4-1.4.18-rahvynl ==> Installing netcdf-c ==> No binary for netcdf-c found: installing from source ==> netcdf-c: Executing phase: 'autoreconf' ==> netcdf-c: Executing phase: 'configure' ==> netcdf-c: Executing phase: 'build' ==> netcdf-c: Executing phase: 'install' [+] /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/netcdf-c-4.7.3-fisfeqj \u8fd9\u4e00\u6b65\u53ea\u9700\u8981\u5c06\u4e0a\u9762\u547d\u4ee4\u4e2d\u7684 spec -Il \u66ff\u6362\u6210 install \u5373\u53ef\u542f\u52a8\u8f6f\u4ef6\u7684\u5b89\u88c5\u3002\u4e4b\u524d\u67e5\u8be2\u663e\u793a\u5df2\u7ecf\u5b89\u88c5\u7684\u8f6f\u4ef6\u4f1a\u81ea\u52a8\u8df3\u8fc7\u5b89\u88c5\u3002 \u8f6f\u4ef6\u5b89\u88c5\u73af\u5883\u914d\u7f6e\u548c\u9009\u9879\u8bbe\u7f6e \u67e5\u627e\u548c\u6dfb\u52a0\u7f16\u8bd1\u5668 (base) demo@ubuntu:~/github/spack$ spack compilers ==> Available compilers -- gcc rhel7-x86_64 --------------------------------------------- gcc@4.8.5 \u521d\u6b21\u8fd0\u884c\u6b64\u547d\u4ee4\u4f1a\u5728~/.spack/ \u76ee\u5f55\u4e0b\u521b\u5efalinux \u6587\u4ef6\u5939\uff0c\u5e76\u5199\u5165compilers.yaml \u6587\u4ef6\u3002\u6b63\u5982\u4e0a\u9762\u6240\u793a\uff0c\u5728\u521d\u59cb\u7cfb\u7edf\u73af\u5883\u4e0b\u53ea\u80fd\u68c0\u7d22\u5230\u7cfb\u7edf\u81ea\u5e26\u7684\u7f16\u8bd1\u5668\uff0c\u7248\u672c\u4e00\u822c\u90fd\u6bd4\u8f83\u65e7\uff0c\u65e0\u6cd5\u6ee1\u8db3\u5e94\u7528\u90e8\u7f72\u7684\u9700\u6c42\uff0c\u9700\u8981\u5b89\u88c5\u8f83\u65b0\u7248\u672c\u7684\u7f16\u8bd1\u5668\uff0c\u5982GCC\uff20\uff18.\uff13.\uff10\u3002 (base) demo@ubuntu:~/github/spack$ spack spec -Il gcc@8.3.0 arch=linux-rhel7-haswell (base) demo@ubuntu:~/github/spack$ spack install gcc@8.3.0 arch=linux-rhel7-haswell \u7f16\u8bd1\u5668\u5b89\u88c5\u540e\u53ef\u4ee5\u901a\u8fc7 spack find \u68c0\u7d22 (base) demo@ubuntu:~/github/spack$ spack find -l ==> 16 installed packages -- linux-rhel7-haswell / gcc@4.8.5 ------------------------------ nbrt3t7 autoconf@2.69 oywfhvk libsigsegv@2.12 yiirsm2 perl@5.30.3 rqa3ho7 automake@1.16.2 swiq7rt libtool@2.4.6 cexp2vp pkgconf@1.7.3 263modn gcc@8.3.0 dipchcn m4@1.4.18 a72rtxy readline@8.0 qrwijay gdbm@1.18.1 upj2gnv mpc@1.1.0 zolwez4 zlib@1.2.11 raqmdao gmp@6.1.2 vql3fcw mpfr@3.1.6 zwfd4x6 isl@0.18 cwq7uyp ncurses@6.2 \u7136\u540e\u52a0\u8f7d\u65b0\u5b89\u88c5\u7684GCC\uff0c\u5e76\u6dfb\u52a0\u5230\u914d\u7f6e\u73af\u5883\u4e2d\uff1a (base) demo@ubuntu:~/github/spack$ spack load gcc@8.3.0 (base) demo@ubuntu:~/github/spack$\u3000spack compiler find ==> Added 1 new compiler to /THL7/home/maqz2/.spack/linux/compilers.yaml gcc@8.3.0 ==> Compilers are defined in the following files: /THL7/home/maqz2/.spack/linux/compilers.yaml \u67e5\u770bcompilers.yaml\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u53d1\u73b0gcc@8.3.0\u5df2\u7ecf\u6dfb\u52a0\u5230\u5176\u4e2d\uff1a [maqz2@th-hpc2-ln0 ~]$ cat /THL7/home/maqz2/.spack/linux/compilers.yaml compilers: - compiler: paths: cc: /usr/bin/gcc cxx: /usr/bin/g++ f77: /usr/bin/gfortran fc: /usr/bin/gfortran operating_system: rhel7 target: x86_64 modules: [] environment: {} extra_rpaths: [] flags: {} spec: gcc@4.8.5 - compiler: paths: cc: /THL6/software/opt/linux-rhel7-haswell/gcc-4.8.5/gcc-8.3.0-263modn/bin/gcc cxx: /THL6/software/opt/linux-rhel7-haswell/gcc-4.8.5/gcc-8.3.0-263modn/bin/g++ f77: /THL6/software/opt/linux-rhel7-haswell/gcc-4.8.5/gcc-8.3.0-263modn/bin/gfortran fc: /THL6/software/opt/linux-rhel7-haswell/gcc-4.8.5/gcc-8.3.0-263modn/bin/gfortran operating_system: rhel7 target: x86_64 modules: [] environment: {} extra_rpaths: [] flags: {} spec: gcc@8.3.0 \u914d\u7f6e\u65b9\u5f0f spack \u652f\u6301\u547d\u4ee4\u884c\u53c2\u6570\u548c\u914d\u7f6e\u6587\u4ef6\u4e24\u79cd\u914d\u7f6e\u65b9\u5f0f \u68c0\u67e5\u914d\u7f6e\u53c2\u6570\u662f\u5426\u6b63\u786e (base) demo@ubuntu:~/github/spack$ spack config blame config --- config: /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:105 checksum: True /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:69 build_jobs: 16 /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:86 verify_ssl: True /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:110 dirty: False _builtin debug: False /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:57 build_stage: /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:58 - ~/.spack/stage /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:59 - /THL6/software/opt/tmp /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:60 - /THL6/home/$user/tmp /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:63 - $tempdir/$user/spack-stage /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:63 # - $spack/var/spack/stage /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:63 /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:63 /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:81 # Cache directory for already downloaded source tarballs and archived /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:19 # repositories. This can be purged with `spack clean --downloads`. /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:23 connect_timeout: 10 /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:23 install_tree: /THL6/software/opt/ /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:24 template_dirs: /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:23 - $spack/share/spack/templates /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:27 /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:28 /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:29 # Default directory layout /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:70 install_path_scheme: ${ARCHITECTURE}/${COMPILERNAME}-${COMPILERVER}/${PACKAGE}-${VERSION}-${HASH:7} /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:75 module_roots: /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:94 tcl: /THL6/software/opt/share/spack/modules /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:100 lmod: /THL6/software/opt/share/spack/lmod /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:118 source_cache: $spack/var/spack/cache /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:127 misc_cache: ~/.spack/cache /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:139 suppress_gpg_warnings: False /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:146 install_missing_compilers: False /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:154 build_language: C /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:159 locks: True /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:163 ccache: False \u95ee\u9898\u6392\u67e5\u53ca\u5904\u7406\uff08\u5f85\u5b8c\u6210\uff09 \u62a5\u9519\u4fe1\u606f \u67e5\u770b\u65e5\u5fd7 spack-build-out.txt \u5b89\u88c5\u8c03\u8bd5 We can also enter the build area and try to manually run the build: $ spack build-env mpileaks bash $ spack cd mpileaks The spack build-env command spawned a new shell that contains the same environment that Spack used to build the mpileaks package (you can substitute bash for your favorite shell). The spack cd command changed our working dirctory to the last attempted build for mpileaks. From here we can manually re-run the build:","title":"Spack HPC\u5e94\u7528\u73af\u5883\u90e8\u7f72"},{"location":"environment/spack-tutorial/#spack","text":"Spack \u662f\u4e00\u6b3e\u5f3a\u5927\u7684\u8f6f\u4ef6\u5305\u7ba1\u7406\u5de5\u5177 \u964d\u4f4e\u4e86\u5e94\u7528\u8f6f\u4ef6\u7684\u5b89\u88c5\u96be\u5ea6\uff08\u6e90\u7801\u7f16\u8bd1\uff0c\u4e8c\u8fdb\u5236\u5305\u5b89\u88c5\uff09 \u89e3\u51b3\u8f6f\u4ef6\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff08\u786e\u4fdd\u6784\u5efa\u7684\u4e00\u81f4\u6027\uff09 \u8f6f\u4ef6\u5c42\u7684\u6784\u5efa\u7cfb\u7edf\uff08\u8f6f\u4ef6+\u9009\u9879/\u529f\u80fd\uff0c\u533a\u522b\u4e8eCMake\uff0cMake\uff09","title":"Spack \u7b80\u4ecb"},{"location":"environment/spack-tutorial/#spack_1","text":"## \u5b89\u88c5 spack \u4ee3\u7801\u5305 > git clone https://github.com/spack/spack.git ## \u521d\u59cb\u5316 spack \u73af\u5883 > source spack/share/spack/setup-env.sh","title":"Spack \u5b89\u88c5"},{"location":"environment/spack-tutorial/#spack_2","text":"\u628a\u5982\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230 ~/.bashrc \u6216\u8005 ~/.bash_profile \u6587\u4ef6\u4e2d\u3002 # .bashrc ulimit -l unlimited ulimit -s unlimited # Module package management source /THL8/software/modules/3.2.10/Modules/3.2.10/init/bash module purge # Spack package management export SPACK_ROOT=/THL8/software/opt/spack export PATH=$SPACK_ROOT/bin:$PATH source ${SPACK_ROOT}/share/spack/setup-env.sh","title":"Spack \u73af\u5883\u914d\u7f6e"},{"location":"environment/spack-tutorial/#spack_3","text":"> spack find -l [software name] \u9009\u9879\u8bf4\u660e\uff1a -p, --paths \u663e\u793a\u8f6f\u4ef6\u5b89\u88c5\u8def\u5f84 -d, --deps \u663e\u793a\u8f6f\u4ef6\u5b8c\u6574\u7684\u4f9d\u8d56\u5173\u7cfb\u56fe\uff08\u6709\u5411\u65e0\u73af\u56fe) -l, --long \u663e\u793a\u8f6f\u4ef6spec\u7684hash\u503c\u548c\u7248\u672c\u53f7 -f, --show-flags \u663e\u793a\u8f6f\u4ef6\u5b89\u88c5\u65f6\u7684\u7f16\u8bd1\u5668\u9009\u9879 -x, --explicit \u663e\u793a\u76f4\u63a5\u5b89\u88c5\u7684\u8f6f\u4ef6 -X, --implicit \u663e\u793a\u4f5c\u4e3a\u4f9d\u8d56\u5b89\u88c5\u7684\u8f6f\u4ef6 -v, --variants \u663e\u793a\u8f6f\u4ef6\u7684\u5b89\u88c5\u9009\u9879 software name \u6307\u5b9a\u8f6f\u4ef6\u540d\u79f0\uff0c\u67e5\u770b\u8be5\u8f6f\u4ef6\u8be6\u7ec6\u4fe1\u606f\uff08hash\u503c\uff0c\u7248\u672c\uff0c\u4f9d\u8d56\uff0c\u5b89\u88c5\u9009\u9879\uff0c\u7f16\u8bd1\u9009\u9879\uff09","title":"\u67e5\u770b Spack \u5df2\u5b89\u88c5\u8f6f\u4ef6"},{"location":"environment/spack-tutorial/#_1","text":"\u628a\u5982\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230 ~/.bashrc \u6216\u8005 ~/.bash_profile \u6587\u4ef6\u4e2d\uff0c\u5373\u53ef\u5b8c\u6210\u5bf9intel\u7f16\u8bd1\u566819.0.5\u7248\u672c\uff0cminiconda2\u7684 4.7.12.1\u7248\u672c\uff0cfftw\u76843.3.8\u7248\u672c\u548cnetcdf-fortran\u76844.5.2\u7248\u672c\u7684\u5b89\u88c5\u3002 # Spack package load source <(spack module tcl loads --dependencies /w5ky76k) # intel@19.0.5 source <(spack module tcl loads --dependencies /s6pzrxk) # miniconda2@4.7.12.1 source <(spack module tcl loads --dependencies /pomc2sx) # fftw@3.3.8 source <(spack module tcl loads --dependencies /xpyelbb) # netcdf-fortran@4.5.2 \u5176\u4e2d --dependencies \u662f\u6307\u540c\u65f6\u52a0\u8f7d\u8be5\u8f6f\u4ef6\u7684\u4f9d\u8d56\uff0c/xpyelbb \u662fnetcdf-fortran@4.5.2\u7684\u5b89\u88c5\u7248\u672c\u7684hash\u503c\u3002\u914d\u7f6e\u5b8c ~/.bashrc \u6216\u8005 ~/.bash_profile \u6587\u4ef6\u540e\uff0c\u901a\u8fc7source \u66f4\u65b0\u73af\u5883\uff0c\u5373\u53ef\u5b8c\u6210\u76f8\u5173\u8f6f\u4ef6\u7684\u52a0\u8f7d\uff0c\u53ef\u4ee5\u901a\u8fc7 module list \u67e5\u770b (base) demo@ubuntu:~/github/spack$ module list Currently Loaded Modulefiles: 1) intel-19.0.5-gcc-8.3.0-w5ky76k 9) rdma-core-20-gcc-8.3.0-4hecl3d 2) miniconda2-4.7.12.1-intel-19.0.5-s6pzrxk 10) slurm-16.05.7-intel-19.0.5-rmgee6m 3) libpciaccess-0.13.5-intel-19.0.5-p4yolyz 11) mvapich2-2.3.4-intel-19.0.5-23edecg 4) libiconv-1.16-gcc-8.3.0-hgw6qbv 12) fftw-3.3.8-intel-19.0.5-pomc2sx 5) xz-5.2.5-intel-19.0.5-t7exvpq 13) mvapich2-2.3.4-intel-19.0.5-tgxj347 6) zlib-1.2.11-intel-19.0.5-onq52rg 14) hdf5-1.10.6-intel-19.0.5-3y4zybv 7) libxml2-2.9.10-intel-19.0.5-ososnes 15) netcdf-c-4.7.3-intel-19.0.5-mz4yici 8) libnl-3.3.0-gcc-8.3.0-esj5mge 16) netcdf-fortran-4.5.2-intel-19.0.5-xpyelbb","title":"\u5df2\u5b89\u88c5\u8f6f\u4ef6\u7684\u52a0\u8f7d"},{"location":"environment/spack-tutorial/#_2","text":"","title":"\u5e94\u7528\u8f6f\u4ef6\u7684\u5b89\u88c5"},{"location":"environment/spack-tutorial/#_3","text":"\u8981\u4f7f\u7528 spack \u5b89\u88c5\u4e00\u6b3e\u79d1\u5b66\u8ba1\u7b97\u8f6f\u4ef6\uff0c\u9996\u9009\u8981\u786e\u5b9a spack \u8f6f\u4ef6\u5e93\u4e2d\u662f\u5426\u5df2\u7ecf\u5305\u542b\u8fd9\u6b3e\u8f6f\u4ef6\uff0c\u786e\u8ba4\u7684\u529e\u6cd5\u5c31\u662f\u4f7f\u7528 spack list \u52a0\u8f6f\u4ef6\u540d\u641c\u7d22\uff0c\u6bd4\u5982\u6211\u4eec\u8981\u5b89\u88c5 netcdf \uff0c\u4f7f\u7528 spack list netcdf \u641c\u7d22\u5f97\u5230\u5982\u4e0b\u7ed3\u679c\uff1a (base) demo@ubuntu:~/github/spack$ spack list netcdf ==> 6 packages. netcdf-c netcdf-cxx netcdf-cxx4 netcdf-fortran parallel-netcdf py-netcdf4 \u5982\u679cspack \u8fd8\u4e0d\u652f\u6301\u8be5\u8f6f\u4ef6\uff0c\u4e5f\u5c31\u662f\u8f6f\u4ef6\u5e93\u4e2d\u8fd8\u6ca1\u6709\uff0c\u6bd4\u5982wrf\uff0c\u641c\u7d22\u7ed3\u679c\u4f1a\u5982\u4e0b\u6240\u793a\uff1a (base) demo@ubuntu:~/github/spack$ spack info wrf ==> Error: Package wrf not found. \u4e0d\u8fc7\u6709\u65f6\u641c\u7d22\u4e0d\u5230\u4e0d\u662f\u56e0\u4e3aspack \u5e93\u4e2d\u6ca1\u6709\uff0c\u800c\u662fspack\u4e2d\u4fee\u6539\u4e86\u8f6f\u4ef6\u7684\u540d\u5b57\u3002\u8fd9\u65f6\u53ef\u4ee5\u901a\u8fc7\u641c\u7d22\u8f6f\u4ef6\u63cf\u8ff0\u6765\u67e5\u627e\u8f6f\u4ef6\uff0c\u6bd4\u5982\u6211\u4eec\u67e5\u627e geophysical \u76f8\u5173 \u7684\u8f6f\u4ef6\uff1a (base) demo@ubuntu:~/github/spack$ spack list geophysical ==> 0 packages. (base) demo@ubuntu:~/github/spack$ spack list --search-description geophysical ==> 1 packages. spherepack \u76f4\u63a5\u7528 spack list \u67e5\u627e\u662f\u6ca1\u6709\uff0c\u4f46\u662f\u52a0\u4e0a --search-description \u9009\u9879\u5c31\u53ef\u4ee5\u627e\u5230\u4e00\u4e2a\u53eb\u505aspherepack\u7684\u8f6f\u4ef6\u5305\u3002","title":"\u51c6\u5907\u5de5\u4f5c\u2014\uff1a\u8f6f\u4ef6\u641c\u7d22"},{"location":"environment/spack-tutorial/#_4","text":"\u6709\u65f6\u5373\u4fbf\u8f6f\u4ef6\u5e93\u4e2d\u5305\u542b\u4e86\u4f60\u60f3\u5b89\u88c5\u7684\u8f6f\u4ef6\uff0c\u4e5f\u4e0d\u5fc5\u7740\u6025\u5b89\u88c5\uff0c\u660e\u667a\u7684\u505a\u6cd5\u662f\u5148\u4f7f\u7528 spack info package \u547d\u4ee4\u67e5\u770bspack\u4e2d\u5bf9\u8f6f\u4ef6\u7684\u63cf\u8ff0\uff0c\u8fd8\u662f\u4ee5 netcdf-c \u4e3a\u4f8b\uff1a (base) demo@ubuntu:~/github/spack$ spack info netcdf-c AutotoolsPackage: netcdf-c Description: NetCDF (network Common Data Form) is a set of software libraries and machine-independent data formats that support the creation, access, and sharing of array-oriented scientific data. This is the C distribution. Homepage: http://www.unidata.ucar.edu/software/netcdf Maintainers: @skosukhin @WardF Tags: None Preferred version: 4.7.3 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.7.3.tar.gz Safe versions: master [git] https://github.com/Unidata/netcdf-c.git on branch master 4.7.3 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.7.3.tar.gz 4.7.2 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.7.2.tar.gz 4.7.1 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.7.1.tar.gz 4.7.0 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.7.0.tar.gz 4.6.3 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.6.3.tar.gz 4.6.2 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-c-4.6.2.tar.gz 4.6.1 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.6.1.tar.gz 4.6.0 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.6.0.tar.gz 4.5.0 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.5.0.tar.gz 4.4.1.1 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.4.1.1.tar.gz 4.4.1 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.4.1.tar.gz 4.4.0 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.4.0.tar.gz 4.3.3.1 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.3.3.1.tar.gz 4.3.3 ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.3.3.tar.gz Variants: Name [Default] Allowed values Description ===================== ============== =============================== dap [off] on, off Enable DAP support hdf4 [off] on, off Enable HDF4 support jna [off] on, off Enable JNA support mpi [on] on, off Enable parallel I/O for netcdf-4 parallel-netcdf [off] on, off Enable parallel I/O for classic files pic [on] on, off Produce position-independent code (for shared libs) shared [on] on, off Enable shared library Installation Phases: autoreconf configure build install Build Dependencies: autoconf curl hdf5 m4 parallel-netcdf automake hdf libtool mpi zlib Link Dependencies: curl hdf hdf5 mpi parallel-netcdf zlib Run Dependencies: None Virtual Packages: None \u8fd9\u91cc\u7ed9\u51fa\u4e86netcdf-c\u8f6f\u4ef6\u7684\u7b80\u8981\u4ecb\u7ecd\uff0c\u652f\u6301\u7684\u7248\u672c\uff0c\u652f\u6301\u7684\u5b89\u88c5\u9009\u9879\uff0c\u5b89\u88c5\u6b65\u9aa4\uff0c\u8f6f\u4ef6\u5b89\u88c5\u7684\u4f9d\u8d56\u548c\u94fe\u63a5\u7684\u4f9d\u8d56\u3002\u8fd9\u91cc\u9700\u8981\u91cd\u70b9\u5173\u6ce8\u7684\u662f\u4e24\u4e2a\uff0c\u4e00\u662f\u8f6f\u4ef6\u7684\u7248\u672c\uff0c\u8fd9\u4e2a\u6839\u636e\u7528\u6237\u9700\u6c42\u786e\u5b9a\uff1b\u4e8c\u662fVariants\uff0c\u5373\u5b89\u88c5\u7684\u9009\u9879\u3002\u4f8b\u5982\u662f\u5426\u652f\u6301mpi\uff0c\u662f\u5426\u652f\u6301\u5e76\u884cI/O\u7b49\u7b49\u3002","title":"\u51c6\u5907\u5de5\u4f5c\u4e8c\uff1a\u67e5\u770b\u8f6f\u4ef6\u8be6\u7ec6\u4fe1\u606f"},{"location":"environment/spack-tutorial/#spec","text":"(base) demo@ubuntu:~/github/spack$ spack spec -Il netcdf-c %gcc@8.3.0 arch=linux-rhel7-haswell Input spec -------------------------------- - netcdf-c%gcc@8.3.0 arch=linux-rhel7-haswell Concretized -------------------------------- - fisfeqj netcdf-c@4.7.3%gcc@8.3.0 cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" ~dap~hdf4~jna+mpi~parallel-netcdf+pic+shared arch=linux-rhel7-haswell - p6z4wf2 ^hdf5@1.10.6%gcc@8.3.0 cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" ~cxx~debug~fortran+hl+mpi+pic+shared~szip~threadsafe api=none arch=linux-rhel7-haswell [+] 45jo6ul ^mpich@3.2%gcc@8.3.0 cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" +hwloc+hydra+libxml2+pci+romio~slurm~verbs+wrapperrpath device=ch3 netmod=tcp pmi=pmi arch=linux-rhel7-haswell [+] bpwxbl3 ^zlib@1.2.11%gcc@8.3.0 cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" +optimize+pic+shared arch=linux-rhel7-haswell [+] rahvynl ^m4@1.4.18%gcc@8.3.0 cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" +sigsegv patches=3877ab548f88597ab2327a2230ee048d2d07ace1062efe81fc92e91b7f39cd00,fc9b61654a3ba1a8d6cd78ce087e7c96366c290bc8d2c299f09828d793b853c8 arch=linux-rhel7-haswell [+] zcmcitr ^libsigsegv@2.12%gcc@8.3.0 cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" arch=linux-rhel7-haswell \u8fd9\u91cc\u7684-I\u9009\u9879\u663e\u793a\u76ee\u6807\u8f6f\u4ef6\u548c\u4f9d\u8d56\u8f6f\u4ef6\u7684\u5b89\u88c5\u72b6\u6001\uff0c- \u8868\u793a\u672a\u5b89\u88c5\uff0c[+]\u8868\u793a\u5df2\u7ecf\u5b89\u88c5\uff1b-l\u9009\u9879\u7ed9\u51fa\u4f9d\u8d56\u7684hash\u503c\u4ee5\u53ca\u7248\u672c\u4fe1\u606f\uff1b%gcc@8.3.0 \u6307\u5b9a\u4f7f\u7528gcc 8.3.0\u7f16\u8bd1\u5668\u7f16\u8bd1\u5b89\u88c5\uff0carch=linux-rhel7-haswell \u6307\u660e\u7cfb\u7edf\u7684\u67b6\u6784\u662fhaswell\uff0c\u64cd\u4f5c\u7cfb\u7edf\u662flinux\uff0c\u53d1\u884c\u7248\u662frhel7\u3002 \u67e5\u770bspec \u7684\u76ee\u7684\u662f\u786e\u8ba4\u8be5\u7248\u672c\u7684\u8f6f\u4ef6\u80fd\u5426\u5b89\u88c5\uff0c\u4ee5\u6765\u662f\u5426\u6ee1\u8db3\uff0c\u4ee5\u53ca\u4f9d\u8d56\u8f6f\u4ef6\u7684\u5b89\u88c5\u72b6\u6001\u3002","title":"\u51c6\u5907\u5de5\u4f5c\u4e09\uff1a\u67e5\u770b\u8f6f\u4ef6 spec"},{"location":"environment/spack-tutorial/#_5","text":"(base) demo@ubuntu:~/github/spack$ spack install netcdf-c %gcc@8.3.0 arch=linux-rhel7-haswell ==> mpich@3.2 : externally installed in /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/mpich-3.2-24zn2tm [+] /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/mpich-3.2-24zn2tm [+] /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/zlib-1.2.11-bpwxbl3 [+] /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/libsigsegv-2.12-zcmcitr ==> Installing hdf5 ==> No binary for hdf5 found: installing from source ==> hdf5: Executing phase: 'autoreconf' ==> hdf5: Executing phase: 'configure' ==> hdf5: Executing phase: 'build' ==> hdf5: Executing phase: 'install' [+] /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/hdf5-1.10.6-p6z4wf2 [+] /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/m4-1.4.18-rahvynl ==> Installing netcdf-c ==> No binary for netcdf-c found: installing from source ==> netcdf-c: Executing phase: 'autoreconf' ==> netcdf-c: Executing phase: 'configure' ==> netcdf-c: Executing phase: 'build' ==> netcdf-c: Executing phase: 'install' [+] /THL8/software/opt/linux-rhel7-haswell/gcc-8.3.0/netcdf-c-4.7.3-fisfeqj \u8fd9\u4e00\u6b65\u53ea\u9700\u8981\u5c06\u4e0a\u9762\u547d\u4ee4\u4e2d\u7684 spec -Il \u66ff\u6362\u6210 install \u5373\u53ef\u542f\u52a8\u8f6f\u4ef6\u7684\u5b89\u88c5\u3002\u4e4b\u524d\u67e5\u8be2\u663e\u793a\u5df2\u7ecf\u5b89\u88c5\u7684\u8f6f\u4ef6\u4f1a\u81ea\u52a8\u8df3\u8fc7\u5b89\u88c5\u3002","title":"\u6700\u7ec8\u7684\u5de5\u4f5c\uff1a\u8f6f\u4ef6\u5b89\u88c5"},{"location":"environment/spack-tutorial/#_6","text":"","title":"\u8f6f\u4ef6\u5b89\u88c5\u73af\u5883\u914d\u7f6e\u548c\u9009\u9879\u8bbe\u7f6e"},{"location":"environment/spack-tutorial/#_7","text":"(base) demo@ubuntu:~/github/spack$ spack compilers ==> Available compilers -- gcc rhel7-x86_64 --------------------------------------------- gcc@4.8.5 \u521d\u6b21\u8fd0\u884c\u6b64\u547d\u4ee4\u4f1a\u5728~/.spack/ \u76ee\u5f55\u4e0b\u521b\u5efalinux \u6587\u4ef6\u5939\uff0c\u5e76\u5199\u5165compilers.yaml \u6587\u4ef6\u3002\u6b63\u5982\u4e0a\u9762\u6240\u793a\uff0c\u5728\u521d\u59cb\u7cfb\u7edf\u73af\u5883\u4e0b\u53ea\u80fd\u68c0\u7d22\u5230\u7cfb\u7edf\u81ea\u5e26\u7684\u7f16\u8bd1\u5668\uff0c\u7248\u672c\u4e00\u822c\u90fd\u6bd4\u8f83\u65e7\uff0c\u65e0\u6cd5\u6ee1\u8db3\u5e94\u7528\u90e8\u7f72\u7684\u9700\u6c42\uff0c\u9700\u8981\u5b89\u88c5\u8f83\u65b0\u7248\u672c\u7684\u7f16\u8bd1\u5668\uff0c\u5982GCC\uff20\uff18.\uff13.\uff10\u3002 (base) demo@ubuntu:~/github/spack$ spack spec -Il gcc@8.3.0 arch=linux-rhel7-haswell (base) demo@ubuntu:~/github/spack$ spack install gcc@8.3.0 arch=linux-rhel7-haswell \u7f16\u8bd1\u5668\u5b89\u88c5\u540e\u53ef\u4ee5\u901a\u8fc7 spack find \u68c0\u7d22 (base) demo@ubuntu:~/github/spack$ spack find -l ==> 16 installed packages -- linux-rhel7-haswell / gcc@4.8.5 ------------------------------ nbrt3t7 autoconf@2.69 oywfhvk libsigsegv@2.12 yiirsm2 perl@5.30.3 rqa3ho7 automake@1.16.2 swiq7rt libtool@2.4.6 cexp2vp pkgconf@1.7.3 263modn gcc@8.3.0 dipchcn m4@1.4.18 a72rtxy readline@8.0 qrwijay gdbm@1.18.1 upj2gnv mpc@1.1.0 zolwez4 zlib@1.2.11 raqmdao gmp@6.1.2 vql3fcw mpfr@3.1.6 zwfd4x6 isl@0.18 cwq7uyp ncurses@6.2 \u7136\u540e\u52a0\u8f7d\u65b0\u5b89\u88c5\u7684GCC\uff0c\u5e76\u6dfb\u52a0\u5230\u914d\u7f6e\u73af\u5883\u4e2d\uff1a (base) demo@ubuntu:~/github/spack$ spack load gcc@8.3.0 (base) demo@ubuntu:~/github/spack$\u3000spack compiler find ==> Added 1 new compiler to /THL7/home/maqz2/.spack/linux/compilers.yaml gcc@8.3.0 ==> Compilers are defined in the following files: /THL7/home/maqz2/.spack/linux/compilers.yaml \u67e5\u770bcompilers.yaml\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u53d1\u73b0gcc@8.3.0\u5df2\u7ecf\u6dfb\u52a0\u5230\u5176\u4e2d\uff1a [maqz2@th-hpc2-ln0 ~]$ cat /THL7/home/maqz2/.spack/linux/compilers.yaml compilers: - compiler: paths: cc: /usr/bin/gcc cxx: /usr/bin/g++ f77: /usr/bin/gfortran fc: /usr/bin/gfortran operating_system: rhel7 target: x86_64 modules: [] environment: {} extra_rpaths: [] flags: {} spec: gcc@4.8.5 - compiler: paths: cc: /THL6/software/opt/linux-rhel7-haswell/gcc-4.8.5/gcc-8.3.0-263modn/bin/gcc cxx: /THL6/software/opt/linux-rhel7-haswell/gcc-4.8.5/gcc-8.3.0-263modn/bin/g++ f77: /THL6/software/opt/linux-rhel7-haswell/gcc-4.8.5/gcc-8.3.0-263modn/bin/gfortran fc: /THL6/software/opt/linux-rhel7-haswell/gcc-4.8.5/gcc-8.3.0-263modn/bin/gfortran operating_system: rhel7 target: x86_64 modules: [] environment: {} extra_rpaths: [] flags: {} spec: gcc@8.3.0","title":"\u67e5\u627e\u548c\u6dfb\u52a0\u7f16\u8bd1\u5668"},{"location":"environment/spack-tutorial/#_8","text":"spack \u652f\u6301\u547d\u4ee4\u884c\u53c2\u6570\u548c\u914d\u7f6e\u6587\u4ef6\u4e24\u79cd\u914d\u7f6e\u65b9\u5f0f \u68c0\u67e5\u914d\u7f6e\u53c2\u6570\u662f\u5426\u6b63\u786e (base) demo@ubuntu:~/github/spack$ spack config blame config --- config: /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:105 checksum: True /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:69 build_jobs: 16 /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:86 verify_ssl: True /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:110 dirty: False _builtin debug: False /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:57 build_stage: /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:58 - ~/.spack/stage /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:59 - /THL6/software/opt/tmp /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:60 - /THL6/home/$user/tmp /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:63 - $tempdir/$user/spack-stage /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:63 # - $spack/var/spack/stage /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:63 /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:63 /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:81 # Cache directory for already downloaded source tarballs and archived /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:19 # repositories. This can be purged with `spack clean --downloads`. /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:23 connect_timeout: 10 /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:23 install_tree: /THL6/software/opt/ /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:24 template_dirs: /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:23 - $spack/share/spack/templates /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:27 /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:28 /THL6/software/opt/spack-0.15.4/etc/spack/config.yaml:29 # Default directory layout /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:70 install_path_scheme: ${ARCHITECTURE}/${COMPILERNAME}-${COMPILERVER}/${PACKAGE}-${VERSION}-${HASH:7} /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:75 module_roots: /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:94 tcl: /THL6/software/opt/share/spack/modules /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:100 lmod: /THL6/software/opt/share/spack/lmod /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:118 source_cache: $spack/var/spack/cache /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:127 misc_cache: ~/.spack/cache /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:139 suppress_gpg_warnings: False /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:146 install_missing_compilers: False /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:154 build_language: C /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:159 locks: True /THL6/software/opt/spack-0.15.4/etc/spack/defaults/config.yaml:163 ccache: False","title":"\u914d\u7f6e\u65b9\u5f0f"},{"location":"environment/spack-tutorial/#_9","text":"","title":"\u95ee\u9898\u6392\u67e5\u53ca\u5904\u7406\uff08\u5f85\u5b8c\u6210\uff09"},{"location":"environment/spack-tutorial/#_10","text":"","title":"\u62a5\u9519\u4fe1\u606f"},{"location":"environment/spack-tutorial/#spack-build-outtxt","text":"","title":"\u67e5\u770b\u65e5\u5fd7 spack-build-out.txt"},{"location":"environment/spack-tutorial/#_11","text":"We can also enter the build area and try to manually run the build: $ spack build-env mpileaks bash $ spack cd mpileaks The spack build-env command spawned a new shell that contains the same environment that Spack used to build the mpileaks package (you can substitute bash for your favorite shell). The spack cd command changed our working dirctory to the last attempted build for mpileaks. From here we can manually re-run the build:","title":"\u5b89\u88c5\u8c03\u8bd5"},{"location":"manual/ft2000%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C-%E5%BA%94%E7%94%A8%E7%8E%AF%E5%A2%83%E5%8A%A0%E8%BD%BD%E9%83%A8%E5%88%86/","text":"\u4e3a\u4e86\u65b9\u4fbf\u7528\u6237\u5feb\u901f\u914d\u7f6e\u5de5\u4f5c\u73af\u5883\uff0cFT2000+\u7cfb\u7edf\u4e0a\u9884\u88c5\u4e86\u5927\u91cf\u7684\u8f6f\u4ef6\uff0c\u5e38\u7528\u5e94\u7528\u8f6f\u4ef6\u8fd8\u6839\u636e\u7528\u6237\u7684\u9700\u6c42\u5b89\u88c5\u4e86\u4e0d\u540c\u7684\u7248\u672c\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u9700\u6c42\u9009\u62e9\u52a0\u8f7d\u4e0d\u540c\u7684\u8f6f\u4ef6\uff0c\u6765\u6784\u5efa\u9002\u5408\u81ea\u5df1\u7684\u7f16\u8bd1\u73af\u5883\u548c\u7a0b\u5e8f\u8fd0\u884c\u73af\u5883\u3002\u76ee\u524dFT2000+\u7cfb\u7edf\u4e0a\u7684\u5e94\u7528\u90e8\u7f72\u65b9\u5f0f\u6709\uff081\uff09\u901a\u8fc7Environment modules \u5de5\u5177\u7ba1\u7406\u7684\u624b\u52a8\u90e8\u7f72\u548c\uff082\uff09\u901a\u8fc7spack\u90e8\u7f72\u4e24\u79cd\u65b9\u5f0f\uff0c\u52a0\u8f7d\u65b9\u5f0f\u7565\u6709\u533a\u522b\uff0c\u8fd9\u91cc\u5206\u522b\u4ecb\u7ecd\u3002 Environment modules \u5de5\u5177\u7b80\u4ecb FT2000+\u7cfb\u7edf\u91c7\u7528 Environment modules \u5de5\u5177\u7528\u6765\u5feb\u901f\u8bbe\u7f6e\u548c\u4fee\u6539\u7528\u6237\u7f16\u8bd1\u8fd0\u884c\u73af\u5883\u3002 \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 Environment modules \u5de5\u5177\u52a0\u8f7d\u548c\u5378\u8f7d modulefile \uff08\u73af\u5883\u914d\u7f6e\u6587\u4ef6\uff09 \u6765\u6539\u53d8\u8d26\u6237\u4e0b\u7684\u73af\u5883\u53d8\u91cf\uff0c \u800c\u65e0\u9700\u9891\u7e41\u624b\u52a8\u4fee\u6539.bashrc\u6587\u4ef6\uff0c \u4ece\u800c\u907f\u514d\u8bef\u64cd\u4f5c\u3002 \u4e0b\u9762\u7b80\u8ff0\u5e38\u7528\u7684module\u4f7f\u7528\u65b9\u5f0f\uff1a \uff081\uff09\u4f7f\u7528 module avail \u547d\u4ee4\u67e5\u770b\u7cfb\u7edf\u5df2\u5b89\u88c5\u7684\u6240\u6709\u8f6f\u4ef6\uff0c\u786e\u8ba4\u6240\u9700\u7684\u8f6f\u4ef6\u662f\u5426\u5df2\u7ecf\u90e8\u7f72\uff0c\u6216\u8005\u4f7f\u7528 module avail \u8f6f\u4ef6\u540d\u79f0 \u76f4\u63a5\u67e5\u8be2\u6240\u9700\u8f6f\u4ef6\u3002\u793a\u4f8b\u5982\u4e0b\uff1a spack@ln1:~$ module avail --------------------------------------- /thfs1/software/modulefiles/Applications -------------------------------------- cp2k/5.1.0-gcc8.3.0-mpi-x-plumed gromacs/2016.6-dp-gcc9.3.0-mpi-x lammps/29Oct20-gcc8.3.0-mpi-x espresso/6.3-gcc9.3.0-mpi-x-gcc9.3.0 gromacs/2016.6-sp-gcc9.3.0-mpi-x namd/2021.6.8-gcc8.3.0-mpi-x espresso/6.5-gcc9.3.0-mpi-x-gcc9.3.0 gromacs/2018.8-dp-gcc9.3.0-mpi-x openfoam/6.0-gcc8.3.0-mpi-x espresso/6.6-gcc9.3.0-mpi-x-gcc9.3.0 gromacs/2018.8-sp-gcc9.3.0-mpi-x plumed/2.7.1-gcc8.3.0-mpi-x espresso/6.7Max-gcc8.3.0-mpi-x gromacs/2019.6-dp-gcc9.3.0-mpi-x siesta/4.0.2-gcc8.3.0-mpi-x gatk/4.2.0.0 gromacs/2019.6-sp-gcc9.3.0-mpi-x wps/4.3-emreal-dmpar-gcc8.3.0-mpi-x gromacs/4.6.7-dp-gcc9.3.0-mpi-x gromacs/2020.2-dp-gcc9.3.0-mpi-x wps/4.3-emreal-dmpar-gcc9.3.0-mpi-x gromacs/4.6.7-sp-gcc9.3.0-mpi-x gromacs/2020.2-sp-gcc9.3.0-mpi-x wrf/4.3-emreal-dmpar-gcc8.3.0-mpi-x gromacs/5.0.7-dp-gcc9.3.0-mpi-x gromacs/2020.6-dp-gcc9.3.0-mpi-x wrf/4.3-emreal-dmpar-gcc9.3.0-mpi-x gromacs/5.0.7-sp-gcc9.3.0-mpi-x gromacs/2020.6-sp-gcc9.3.0-mpi-x wrf/chem-4.3-emreal-dmpar-gcc8.3.0-mpi-x gromacs/5.1.5-dp-gcc9.3.0-mpi-x gromacs/2021.2-dp-gcc9.3.0-mpi-x wrf/chem-4.3-emreal-dmpar-gcc9.3.0-mpi-x gromacs/5.1.5-sp-gcc9.3.0-mpi-x gromacs/2021.2-sp-gcc9.3.0-mpi-x --------------------------------------- /thfs1/software/modulefiles/Compilers ----------------------------------------- GCC/8.3.0 GCC/10.2.0 mpich/mpi-n-gcc9.3.0 mpich/mpi-x-dbg-gcc9.3.0 mpich/mpi-x-gcc9.3.0(default) GCC/9.3.0(default) mpich/mpi-n-gcc8.3.0 mpich/mpi-x-dbg-gcc8.3.0 mpich/mpi-x-gcc8.3.0 --------------------------------------- /thfs1/software/modulefiles/Graphics ----------------------------------------- jasper/2.0.14-gcc8.3.0 libjpeg-turbo/2.1.0-gcc8.3.0 libpng/1.6.37-gcc8.3.0 jasper/2.0.14-gcc9.3.0 libjpeg-turbo/2.1.0-gcc9.3.0 libpng/1.6.37-gcc9.3.0 ... ... \u76ee\u524dFT2000+\u4e3b\u8981\u90e8\u7f72\u4e86 Applications \u3001 Compilers \u3001 Graphics \u3001 IO_tools \u3001 Libraries \u3001 Profiling_tools \u3001 Tools \u4e03\u5927\u7c7b\u5e94\u7528/\u8f6f\u4ef6\uff0c\u4ee5\u53ca\u4e00\u4e2a Proxy \u4ee3\u7406\u5de5\u5177\uff0c\u5305\u62ec\u4e86\u79d1\u5b66\u8ba1\u7b97\u5e94\u7528\u3001\u7f16\u8bd1\u73af\u5883\u3001\u56fe\u5f62\u5316\u5de5\u5177\u3001IO\u5de5\u5177\u3001\u6570\u5b66\u5e93\u3001\u6027\u80fd\u5206\u6790\u5de5\u5177\u3001\u5176\u4ed6\u5de5\u5177\u8fd9\u4e9b\u79d1\u5b66\u8ba1\u7b97\u5e38\u7528\u7684\u5404\u79cd\u8f6f\u4ef6\u3002 \uff082\uff09\u4f7f\u7528 module load \u6216 module unload \u547d\u4ee4\u52a0\u8f7d\u6216\u5378\u8f7d\u6240\u9700\u8f6f\u4ef6\uff0c\u4ee5\u53ca\u7528 module list \u67e5\u770b\u8d26\u6237\u4e0b\u5df2\u7ecf\u52a0\u8f7d\u7684\u8f6f\u4ef6\u5217\u8868 spack@ln1:~$ module list No Modulefiles Currently Loaded. spack@ln1:~$ module load GCC/9.3.0 spack@ln1:~$ module load mpich/mpi-x-gcc9.3.0 spack@ln1:~$ module list Currently Loaded Modulefiles: 1) GCC/9.3.0(default) 2) mpich/mpi-x-gcc9.3.0(default) spack@ln1:~$ module unload mpich/mpi-x-gcc9.3.0 spack@ln1:~$ module unload GCC/9.3.0 spack@ln1:~$ module list No Modulefiles Currently Loaded. \uff083\uff09\u4f7f\u7528 module help \u548c module show \u547d\u4ee4\u67e5\u770b\u8f6f\u4ef6\u76f8\u5173\u4fe1\u606f\uff0c module help \u4e3b\u8981\u67e5\u8be2\u76f8\u5e94\u8f6f\u4ef6\u8bf4\u660e\u4fe1\u606f\uff0c\u800c module show \u4e3b\u8981\u5c55\u793a\u8f6f\u4ef6\u52a0\u8f7d\u65f6\u5f71\u54cd\u7684\u73af\u5883\u53d8\u91cf\u4fe1\u606f\uff0c\u8be5\u547d\u4ee4\u4e00\u822c\u7528\u4e8e\u7528\u6237\u67e5\u8be2\u6240\u52a0\u8f7d\u7684\u5e93\u7684\u5b89\u88c5\u8def\u5f84\u3001\u5934\u6587\u4ef6\u8def\u5f84\u548c\u5e93\u6587\u4ef6\u8def\u5f84\u3002 spack@ln1:~$ module help mpich/mpi-x-gcc9.3.0 ------------------------------------------------------------------- Module Specific Help for /thfs1/software/modulefiles/Compilers/mpich/mpi-x-gcc9.3.0: modules - loads the modules software & application environment This adds /thfs1/software/mpich/mpi-x-gcc9.3.0/* to several of the environment variables. Version mpi-x-gcc9.3.0 ------------------------------------------------------------------- spack@ln1:~$ module show mpich/mpi-x-gcc9.3.0 ------------------------------------------------------------------- /thfs1/software/modulefiles/Compilers/mpich/mpi-x-gcc9.3.0: module-whatis {loads mpich/mpi-x-gcc9.3.0} conflict mpich prepend-path PATH /thfs1/software/mpich/mpi-x-gcc9.3.0/bin prepend-path CPATH /thfs1/software/mpich/mpi-x-gcc9.3.0/include prepend-path C_INCLUDE_PATH /thfs1/software/mpich/mpi-x-gcc9.3.0/include prepend-path CXX_INCLUDE_PATH /thfs1/software/mpich/mpi-x-gcc9.3.0/include prepend-path LIBRARY_PATH /thfs1/software/mpich/mpi-x-gcc9.3.0/lib prepend-path LD_LIBRARY_PATH /thfs1/software/mpich/mpi-x-gcc9.3.0/lib prepend-path PKG_CONFIG_PATH /thfs1/software/mpich/mpi-x-gcc9.3.0/lib/pkgconfig setenv UCX_TLS sm,glex ------------------------------------------------------------------- \uff084\uff09\u4f7f\u7528 module switch \u6216\u8005 module swap \u547d\u4ee4\u66ff\u6362\u73af\u5883\u4e2d\u52a0\u8f7d\u7684\u67d0\u4e2a\u8f6f\u4ef6\u5e94\u7528\u3002 spack@ln1:~$ module load GCC/9.3.0 spack@ln1:~$ module load mpich/mpi-x-gcc9.3.0 spack@ln1:~$ module list Currently Loaded Modulefiles: 1) GCC/9.3.0(default) 2) mpich/mpi-x-gcc9.3.0(default) ------------------------------------------------------------------- spack@ln1:~$ module switch mpich/mpi-x-dbg-gcc9.3.0 ------------------------------------------------------------------- spack@ln1:~$ module list Currently Loaded Modulefiles: 1) GCC/9.3.0(default) 2) mpich/mpi-x-dbg-gcc9.3.0 Module \u5e38\u7528\u547d\u4ee4\u8868 \u547d\u4ee4 \u8bf4\u660e module avail [modulefile] \u67e5\u770b\u7cfb\u7edf\u4e2d\u6240\u6709\u53ef\u7528\u7684\u8f6f\u4ef6\uff0c\u5982\u7ed9\u5b9amodulefile\u53c2\u6570\uff0c\u5219\u67e5\u8be2\u8be5\u8f6f\u4ef6\u4fe1\u606f\u3002 module help [modulefile] \u663e\u793a\u6bcf\u4e2a\u5b50\u547d\u4ee4\u7684\u7528\u6cd5\uff0c\u5982\u7ed9\u5b9amodulefile\u53c2\u6570\uff0c\u5219\u663e\u793amodulefile\u4e2d\u7684\u5e2e\u52a9\u4fe1\u606f\u3002 module add |load modulefile \u52a0\u8f7dmodulefile\u4e2d\u8bbe\u5b9a\u7684\u73af\u5883 module rm|unload modulefile \u5378\u8f7d\u5df2\u52a0\u8f7d\u7684\u73af\u5883modulefile module list \u663e\u793a\u7528\u6237\u5df2\u52a0\u8f7d\u7684\u73af\u5883\u53d8\u91cf module show modulefile \u663e\u793amodulefile\u73af\u5883\u53d8\u91cf\u4fe1\u606f module swap|switch modulefile1 modulefile2 \u7528modulefile2\u66ff\u6362\u5f53\u524d\u5df2\u52a0\u8f7d\u7684modulefile1 module purge \u5378\u8f7d\u6240\u6709\u52a0\u8f7d\u7684modulefiles spack HPC\u5e94\u7528\u90e8\u7f72\u7ba1\u7406\u5de5\u5177\u7b80\u4ecb \u4e3a\u4e86\u63d0\u5347\u5e94\u7528\u90e8\u7f72\u6548\u7387\u548c\u90e8\u7f72\u8d28\u91cf\uff0c\u63d0\u5347\u7528\u6237\u4f7f\u7528\u4f53\u9a8c\uff0c\u6211\u4eec\u5c1d\u8bd5\u5728FT2000+\u7cfb\u7edf\u5f15\u5165spack HPC\u5e94\u7528\u90e8\u7f72\u7ba1\u7406\u5de5\u5177\u6765\u90e8\u7f72\u5e94\u7528\u73af\u5883\u3002 \u7528\u6237\u8d26\u6237\u4e0b\u4f7f\u7528spack\u9700\u8981\u5148\u52a0\u8f7dspack\u73af\u5883\uff0c\u65b9\u5f0f\u4e3a\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230 ~/.bashrc \u6216 ~/.bash_aliases \u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u6267\u884c source ~/.bashrc \u91cd\u65b0\u52a0\u8f7d\u73af\u5883\u3002 # Spack package management if [ -d \"/thfs1/software/spack/spack\" ]; then export SPACK_ROOT=/thfs1/software/spack/spack export PATH=$SPACK_ROOT/bin:$PATH #source /thfs1/software/spack/spack/share/spack/setup-env.sh export MODULEPATH=/thfs1/software/spack/share/spack/modules/linux-ubuntu20.04-aarch64:$MODULEPATH fi \u4e0b\u9762\u7b80\u8ff0\u5e38\u7528\u7684spack\u4f7f\u7528\u65b9\u5f0f\uff1a (1) \u4f7f\u7528 spack find \u547d\u4ee4\u67e5\u770b\u7cfb\u7edf\u5df2\u5b89\u88c5\u8f6f\u4ef6 > spack find -l [software spec] \u9009\u9879\u8bf4\u660e\uff1a -p, --paths \u663e\u793a\u8f6f\u4ef6\u5b89\u88c5\u8def\u5f84 -d, --deps \u663e\u793a\u8f6f\u4ef6\u5b8c\u6574\u7684\u4f9d\u8d56\u5173\u7cfb\u56fe\uff08\u6709\u5411\u65e0\u73af\u56fe) -l, --long \u663e\u793a\u8f6f\u4ef6spec\u7684hash\u503c\u548c\u7248\u672c\u53f7 -f, --show-flags \u663e\u793a\u8f6f\u4ef6\u5b89\u88c5\u65f6\u7684\u7f16\u8bd1\u5668\u9009\u9879 -x, --explicit \u663e\u793a\u76f4\u63a5\u5b89\u88c5\u7684\u8f6f\u4ef6 -X, --implicit \u663e\u793a\u4f5c\u4e3a\u4f9d\u8d56\u5b89\u88c5\u7684\u8f6f\u4ef6 -v, --variants \u663e\u793a\u8f6f\u4ef6\u7684\u5b89\u88c5\u9009\u9879 software spec \u6307\u5b9a\u8f6f\u4ef6\u540d\u79f0\u53ca\u914d\u7f6e\u9009\u9879\uff0c\u67e5\u770b\u8f6f\u4ef6\u8be6\u7ec6\u4fe1\u606f\uff08hash\u503c\uff0c\u7248\u672c\uff0c\u4f9d\u8d56\uff0c\u5b89\u88c5\u9009\u9879\uff0c\u7f16\u8bd1\u9009\u9879\uff09 \u6ce8\uff1a spack find \u547d\u4ee4\u529f\u80fd\u4e0a\u7c7b\u4f3c module avail \uff0c\u4f46\u4e0d\u652f\u6301\u6a21\u7cca\u67e5\u8be2\u3002\u6bd4\u5982\u7528spack \u7684\u90e8\u7f72\u7684netcdf\u8f6f\u4ef6\u5206\u4e3a netcdf-c \u548c netcdf-fortran \uff0c\u5982\u679c spack find \u547d\u4ee4\u4e2d\u4ec5\u7ed9\u51fa netcdf \u662f\u65e0\u6cd5\u68c0\u7d22\u5230\u7684\u3002 \uff082\uff09\u52a0\u8f7dspack\u90e8\u7f72\u7684\u5e94\u7528 \u76ee\u524dFT2000+\u7cfb\u7edf\u4e0a\u5229\u7528spack\u90e8\u7f72\u7684\u5e94\u7528\uff0c\u6700\u7ec8\u90fd\u751f\u6210\u4e86modulefile\u6587\u4ef6\uff0c\u7528\u6237\u5176\u5b9e\u53ef\u7528\u6307\u5b9a $MODULEPATH \u540e\u5229\u7528 module load \u547d\u4ee4\u52a0\u8f7d\u76f8\u5e94\u7684\u6a21\u5757\uff1b\u4f46\u662f\u8fd9\u6837\u505a\u4e00\u6765\u589e\u52a0\u4e86\u9009\u62e9\u8f6f\u4ef6\u7684\u7e41\u7410\u7a0b\u5ea6\uff0c\u4e8c\u6765\u5bb9\u6613\u7834\u574f\u8f6f\u4ef6\u7684\u4f9d\u8d56\u8def\u5f84\u3002 \u56e0\u6b64\u5efa\u8bae\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u52a0\u8f7d\u5e94\u7528\uff08\u4ee5\u901a\u7528\u5730\u7403\u7cfb\u7edf\u6a21\u5f0fCESM\u7684\u4f9d\u8d56\u4e3a\u4f8b\uff09\uff0c\u5c06\u4ee5\u4e0b\u5185\u5bb9\u52a0\u5165 ~/.bashrc \u5373\u53ef\u5b8c\u6210\u73af\u5883\u52a0\u8f7d\uff1a source <(spack module tcl loads --dependencies /kkrtpmv) # gcc@9.3.0 source <(spack module tcl loads --dependencies /e4lfm5m) # cmake@3.18.4 source <(spack module tcl loads --dependencies /xw6ltva) # esmf@7.1.0r \u4e0a\u8ff0\u547d\u4ee4\u4e2d\u901a\u8fc7\u6dfb\u52a0 --dependencies \u53ef\u4ee5\u5b9e\u73b0\u540c\u65f6\u52a0\u8f7d esmf \u7684\u4f9d\u8d56(\u540c\u65f6\u5305\u542b\u4e86\u7f16\u8bd1CESM\u6240\u9700\u7684NETCDF\uff0cHDF5\uff0cMPICH\u7b49\u4f9d\u8d56) xw6ltva esmf@7.1.0r%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" 5olvqhx libxml2@2.9.10%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" wqdybbr libiconv@1.16%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" jfyvejj xz@5.2.5%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" 45oz4lo zlib@1.2.11%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" wstzt3c mpich@3.4.2%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" qescd7l netcdf-c@4.7.4%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" iewu4ps hdf5@1.10.7%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" phclqla libszip@2.1.1%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" cpi6jdd numactl@2.0.14%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" vxoao5f parallel-netcdf@1.12.1%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" e2epafa netcdf-fortran@4.5.3%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" uhgldx3 openblas@0.3.12%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" tolmlph xerces-c@3.2.3%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" kqjyzen curl@7.72.0%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" uzilztm libidn2@2.3.0%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" 3rk53br libunistring@0.9.10%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" kihy5an openssl@1.1.1h%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" \u7136\u540e\u6267\u884c source ~/.bashrc \u5b9e\u73b0\u5bf9\u73af\u5883\u7684\u52a0\u8f7d\u3002 spack@ln1:~$ module list Currently Loaded Modulefiles: 1) gmp-6.1.2-gcc-8.3.0-lx3wp4x 10) cmake-3.18.4-gcc-9.3.0-e4lfm5m 19) netcdf-c-4.7.4-gcc-9.3.0-qescd7l 2) isl-0.20-gcc-8.3.0-gqkr5oa 11) libiconv-1.16-gcc-9.3.0-wqdybbr 20) netcdf-fortran-4.5.3-gcc-9.3.0-e2epafa 3) mpfr-3.1.6-gcc-8.3.0-yip63bk 12) xz-5.2.5-gcc-9.3.0-jfyvejj 21) openblas-0.3.12-gcc-9.3.0-uhgldx3 4) mpc-1.1.0-gcc-8.3.0-ylgcxws 13) libxml2-2.9.10-gcc-9.3.0-5olvqhx 22) libunistring-0.9.10-gcc-9.3.0-3rk53br 5) zlib-1.2.11-gcc-8.3.0-ienx4xx 14) mpich-3.4.2-gcc-8.3.0-wstzt3c 23) libidn2-2.3.0-gcc-9.3.0-uzilztm 6) gcc-9.3.0-gcc-8.3.0-kkrtpmv 15) libszip-2.1.1-gcc-9.3.0-phclqla 24) curl-7.72.0-gcc-9.3.0-kqjyzen 7) ncurses-6.2-gcc-9.3.0-jnpnv6s 16) numactl-2.0.14-gcc-9.3.0-cpi6jdd 25) xerces-c-3.2.3-gcc-9.3.0-tolmlph 8) zlib-1.2.11-gcc-9.3.0-45oz4lo 17) hdf5-1.10.7-gcc-9.3.0-iewu4ps 26) esmf-7.1.0r-gcc-9.3.0-xw6ltva 9) openssl-1.1.1h-gcc-9.3.0-kihy5an 18) parallel-netcdf-1.12.1-gcc-9.3.0-vxoao5f \u6ce8\uff1a\u4ee5CESM\u4e3a\u4ee3\u8868\u7684\u4e00\u4e9b\u5e94\u7528\u5728\u7f16\u8bd1\u65f6\u6240\u7528\u7684\u73af\u5883\u4e0e\u52a0\u8f7d\u7684\u4f9d\u8d56\u6240\u7528\u7684\u7f16\u8bd1\u73af\u5883\u4fdd\u6301\u4e00\u81f4\uff0c\u800cspack\u7684\u8fd9\u79cd\u52a0\u8f7d\u65b9\u5f0f\u5f88\u597d\u5730\u6ee1\u8db3\u4e86\u8fd9\u79cd\u8981\u6c42\u3002","title":"ft2000\u7cfb\u7edf\u7528\u6237\u624b\u518c"},{"location":"manual/ft2000%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C-%E5%BA%94%E7%94%A8%E7%8E%AF%E5%A2%83%E5%8A%A0%E8%BD%BD%E9%83%A8%E5%88%86/#environment-modules","text":"FT2000+\u7cfb\u7edf\u91c7\u7528 Environment modules \u5de5\u5177\u7528\u6765\u5feb\u901f\u8bbe\u7f6e\u548c\u4fee\u6539\u7528\u6237\u7f16\u8bd1\u8fd0\u884c\u73af\u5883\u3002 \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 Environment modules \u5de5\u5177\u52a0\u8f7d\u548c\u5378\u8f7d modulefile \uff08\u73af\u5883\u914d\u7f6e\u6587\u4ef6\uff09 \u6765\u6539\u53d8\u8d26\u6237\u4e0b\u7684\u73af\u5883\u53d8\u91cf\uff0c \u800c\u65e0\u9700\u9891\u7e41\u624b\u52a8\u4fee\u6539.bashrc\u6587\u4ef6\uff0c \u4ece\u800c\u907f\u514d\u8bef\u64cd\u4f5c\u3002 \u4e0b\u9762\u7b80\u8ff0\u5e38\u7528\u7684module\u4f7f\u7528\u65b9\u5f0f\uff1a \uff081\uff09\u4f7f\u7528 module avail \u547d\u4ee4\u67e5\u770b\u7cfb\u7edf\u5df2\u5b89\u88c5\u7684\u6240\u6709\u8f6f\u4ef6\uff0c\u786e\u8ba4\u6240\u9700\u7684\u8f6f\u4ef6\u662f\u5426\u5df2\u7ecf\u90e8\u7f72\uff0c\u6216\u8005\u4f7f\u7528 module avail \u8f6f\u4ef6\u540d\u79f0 \u76f4\u63a5\u67e5\u8be2\u6240\u9700\u8f6f\u4ef6\u3002\u793a\u4f8b\u5982\u4e0b\uff1a spack@ln1:~$ module avail --------------------------------------- /thfs1/software/modulefiles/Applications -------------------------------------- cp2k/5.1.0-gcc8.3.0-mpi-x-plumed gromacs/2016.6-dp-gcc9.3.0-mpi-x lammps/29Oct20-gcc8.3.0-mpi-x espresso/6.3-gcc9.3.0-mpi-x-gcc9.3.0 gromacs/2016.6-sp-gcc9.3.0-mpi-x namd/2021.6.8-gcc8.3.0-mpi-x espresso/6.5-gcc9.3.0-mpi-x-gcc9.3.0 gromacs/2018.8-dp-gcc9.3.0-mpi-x openfoam/6.0-gcc8.3.0-mpi-x espresso/6.6-gcc9.3.0-mpi-x-gcc9.3.0 gromacs/2018.8-sp-gcc9.3.0-mpi-x plumed/2.7.1-gcc8.3.0-mpi-x espresso/6.7Max-gcc8.3.0-mpi-x gromacs/2019.6-dp-gcc9.3.0-mpi-x siesta/4.0.2-gcc8.3.0-mpi-x gatk/4.2.0.0 gromacs/2019.6-sp-gcc9.3.0-mpi-x wps/4.3-emreal-dmpar-gcc8.3.0-mpi-x gromacs/4.6.7-dp-gcc9.3.0-mpi-x gromacs/2020.2-dp-gcc9.3.0-mpi-x wps/4.3-emreal-dmpar-gcc9.3.0-mpi-x gromacs/4.6.7-sp-gcc9.3.0-mpi-x gromacs/2020.2-sp-gcc9.3.0-mpi-x wrf/4.3-emreal-dmpar-gcc8.3.0-mpi-x gromacs/5.0.7-dp-gcc9.3.0-mpi-x gromacs/2020.6-dp-gcc9.3.0-mpi-x wrf/4.3-emreal-dmpar-gcc9.3.0-mpi-x gromacs/5.0.7-sp-gcc9.3.0-mpi-x gromacs/2020.6-sp-gcc9.3.0-mpi-x wrf/chem-4.3-emreal-dmpar-gcc8.3.0-mpi-x gromacs/5.1.5-dp-gcc9.3.0-mpi-x gromacs/2021.2-dp-gcc9.3.0-mpi-x wrf/chem-4.3-emreal-dmpar-gcc9.3.0-mpi-x gromacs/5.1.5-sp-gcc9.3.0-mpi-x gromacs/2021.2-sp-gcc9.3.0-mpi-x --------------------------------------- /thfs1/software/modulefiles/Compilers ----------------------------------------- GCC/8.3.0 GCC/10.2.0 mpich/mpi-n-gcc9.3.0 mpich/mpi-x-dbg-gcc9.3.0 mpich/mpi-x-gcc9.3.0(default) GCC/9.3.0(default) mpich/mpi-n-gcc8.3.0 mpich/mpi-x-dbg-gcc8.3.0 mpich/mpi-x-gcc8.3.0 --------------------------------------- /thfs1/software/modulefiles/Graphics ----------------------------------------- jasper/2.0.14-gcc8.3.0 libjpeg-turbo/2.1.0-gcc8.3.0 libpng/1.6.37-gcc8.3.0 jasper/2.0.14-gcc9.3.0 libjpeg-turbo/2.1.0-gcc9.3.0 libpng/1.6.37-gcc9.3.0 ... ... \u76ee\u524dFT2000+\u4e3b\u8981\u90e8\u7f72\u4e86 Applications \u3001 Compilers \u3001 Graphics \u3001 IO_tools \u3001 Libraries \u3001 Profiling_tools \u3001 Tools \u4e03\u5927\u7c7b\u5e94\u7528/\u8f6f\u4ef6\uff0c\u4ee5\u53ca\u4e00\u4e2a Proxy \u4ee3\u7406\u5de5\u5177\uff0c\u5305\u62ec\u4e86\u79d1\u5b66\u8ba1\u7b97\u5e94\u7528\u3001\u7f16\u8bd1\u73af\u5883\u3001\u56fe\u5f62\u5316\u5de5\u5177\u3001IO\u5de5\u5177\u3001\u6570\u5b66\u5e93\u3001\u6027\u80fd\u5206\u6790\u5de5\u5177\u3001\u5176\u4ed6\u5de5\u5177\u8fd9\u4e9b\u79d1\u5b66\u8ba1\u7b97\u5e38\u7528\u7684\u5404\u79cd\u8f6f\u4ef6\u3002 \uff082\uff09\u4f7f\u7528 module load \u6216 module unload \u547d\u4ee4\u52a0\u8f7d\u6216\u5378\u8f7d\u6240\u9700\u8f6f\u4ef6\uff0c\u4ee5\u53ca\u7528 module list \u67e5\u770b\u8d26\u6237\u4e0b\u5df2\u7ecf\u52a0\u8f7d\u7684\u8f6f\u4ef6\u5217\u8868 spack@ln1:~$ module list No Modulefiles Currently Loaded. spack@ln1:~$ module load GCC/9.3.0 spack@ln1:~$ module load mpich/mpi-x-gcc9.3.0 spack@ln1:~$ module list Currently Loaded Modulefiles: 1) GCC/9.3.0(default) 2) mpich/mpi-x-gcc9.3.0(default) spack@ln1:~$ module unload mpich/mpi-x-gcc9.3.0 spack@ln1:~$ module unload GCC/9.3.0 spack@ln1:~$ module list No Modulefiles Currently Loaded. \uff083\uff09\u4f7f\u7528 module help \u548c module show \u547d\u4ee4\u67e5\u770b\u8f6f\u4ef6\u76f8\u5173\u4fe1\u606f\uff0c module help \u4e3b\u8981\u67e5\u8be2\u76f8\u5e94\u8f6f\u4ef6\u8bf4\u660e\u4fe1\u606f\uff0c\u800c module show \u4e3b\u8981\u5c55\u793a\u8f6f\u4ef6\u52a0\u8f7d\u65f6\u5f71\u54cd\u7684\u73af\u5883\u53d8\u91cf\u4fe1\u606f\uff0c\u8be5\u547d\u4ee4\u4e00\u822c\u7528\u4e8e\u7528\u6237\u67e5\u8be2\u6240\u52a0\u8f7d\u7684\u5e93\u7684\u5b89\u88c5\u8def\u5f84\u3001\u5934\u6587\u4ef6\u8def\u5f84\u548c\u5e93\u6587\u4ef6\u8def\u5f84\u3002 spack@ln1:~$ module help mpich/mpi-x-gcc9.3.0 ------------------------------------------------------------------- Module Specific Help for /thfs1/software/modulefiles/Compilers/mpich/mpi-x-gcc9.3.0: modules - loads the modules software & application environment This adds /thfs1/software/mpich/mpi-x-gcc9.3.0/* to several of the environment variables. Version mpi-x-gcc9.3.0 ------------------------------------------------------------------- spack@ln1:~$ module show mpich/mpi-x-gcc9.3.0 ------------------------------------------------------------------- /thfs1/software/modulefiles/Compilers/mpich/mpi-x-gcc9.3.0: module-whatis {loads mpich/mpi-x-gcc9.3.0} conflict mpich prepend-path PATH /thfs1/software/mpich/mpi-x-gcc9.3.0/bin prepend-path CPATH /thfs1/software/mpich/mpi-x-gcc9.3.0/include prepend-path C_INCLUDE_PATH /thfs1/software/mpich/mpi-x-gcc9.3.0/include prepend-path CXX_INCLUDE_PATH /thfs1/software/mpich/mpi-x-gcc9.3.0/include prepend-path LIBRARY_PATH /thfs1/software/mpich/mpi-x-gcc9.3.0/lib prepend-path LD_LIBRARY_PATH /thfs1/software/mpich/mpi-x-gcc9.3.0/lib prepend-path PKG_CONFIG_PATH /thfs1/software/mpich/mpi-x-gcc9.3.0/lib/pkgconfig setenv UCX_TLS sm,glex ------------------------------------------------------------------- \uff084\uff09\u4f7f\u7528 module switch \u6216\u8005 module swap \u547d\u4ee4\u66ff\u6362\u73af\u5883\u4e2d\u52a0\u8f7d\u7684\u67d0\u4e2a\u8f6f\u4ef6\u5e94\u7528\u3002 spack@ln1:~$ module load GCC/9.3.0 spack@ln1:~$ module load mpich/mpi-x-gcc9.3.0 spack@ln1:~$ module list Currently Loaded Modulefiles: 1) GCC/9.3.0(default) 2) mpich/mpi-x-gcc9.3.0(default) ------------------------------------------------------------------- spack@ln1:~$ module switch mpich/mpi-x-dbg-gcc9.3.0 ------------------------------------------------------------------- spack@ln1:~$ module list Currently Loaded Modulefiles: 1) GCC/9.3.0(default) 2) mpich/mpi-x-dbg-gcc9.3.0 Module \u5e38\u7528\u547d\u4ee4\u8868 \u547d\u4ee4 \u8bf4\u660e module avail [modulefile] \u67e5\u770b\u7cfb\u7edf\u4e2d\u6240\u6709\u53ef\u7528\u7684\u8f6f\u4ef6\uff0c\u5982\u7ed9\u5b9amodulefile\u53c2\u6570\uff0c\u5219\u67e5\u8be2\u8be5\u8f6f\u4ef6\u4fe1\u606f\u3002 module help [modulefile] \u663e\u793a\u6bcf\u4e2a\u5b50\u547d\u4ee4\u7684\u7528\u6cd5\uff0c\u5982\u7ed9\u5b9amodulefile\u53c2\u6570\uff0c\u5219\u663e\u793amodulefile\u4e2d\u7684\u5e2e\u52a9\u4fe1\u606f\u3002 module add |load modulefile \u52a0\u8f7dmodulefile\u4e2d\u8bbe\u5b9a\u7684\u73af\u5883 module rm|unload modulefile \u5378\u8f7d\u5df2\u52a0\u8f7d\u7684\u73af\u5883modulefile module list \u663e\u793a\u7528\u6237\u5df2\u52a0\u8f7d\u7684\u73af\u5883\u53d8\u91cf module show modulefile \u663e\u793amodulefile\u73af\u5883\u53d8\u91cf\u4fe1\u606f module swap|switch modulefile1 modulefile2 \u7528modulefile2\u66ff\u6362\u5f53\u524d\u5df2\u52a0\u8f7d\u7684modulefile1 module purge \u5378\u8f7d\u6240\u6709\u52a0\u8f7d\u7684modulefiles","title":"Environment modules \u5de5\u5177\u7b80\u4ecb"},{"location":"manual/ft2000%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C-%E5%BA%94%E7%94%A8%E7%8E%AF%E5%A2%83%E5%8A%A0%E8%BD%BD%E9%83%A8%E5%88%86/#spack-hpc","text":"\u4e3a\u4e86\u63d0\u5347\u5e94\u7528\u90e8\u7f72\u6548\u7387\u548c\u90e8\u7f72\u8d28\u91cf\uff0c\u63d0\u5347\u7528\u6237\u4f7f\u7528\u4f53\u9a8c\uff0c\u6211\u4eec\u5c1d\u8bd5\u5728FT2000+\u7cfb\u7edf\u5f15\u5165spack HPC\u5e94\u7528\u90e8\u7f72\u7ba1\u7406\u5de5\u5177\u6765\u90e8\u7f72\u5e94\u7528\u73af\u5883\u3002 \u7528\u6237\u8d26\u6237\u4e0b\u4f7f\u7528spack\u9700\u8981\u5148\u52a0\u8f7dspack\u73af\u5883\uff0c\u65b9\u5f0f\u4e3a\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230 ~/.bashrc \u6216 ~/.bash_aliases \u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u6267\u884c source ~/.bashrc \u91cd\u65b0\u52a0\u8f7d\u73af\u5883\u3002 # Spack package management if [ -d \"/thfs1/software/spack/spack\" ]; then export SPACK_ROOT=/thfs1/software/spack/spack export PATH=$SPACK_ROOT/bin:$PATH #source /thfs1/software/spack/spack/share/spack/setup-env.sh export MODULEPATH=/thfs1/software/spack/share/spack/modules/linux-ubuntu20.04-aarch64:$MODULEPATH fi \u4e0b\u9762\u7b80\u8ff0\u5e38\u7528\u7684spack\u4f7f\u7528\u65b9\u5f0f\uff1a (1) \u4f7f\u7528 spack find \u547d\u4ee4\u67e5\u770b\u7cfb\u7edf\u5df2\u5b89\u88c5\u8f6f\u4ef6 > spack find -l [software spec] \u9009\u9879\u8bf4\u660e\uff1a -p, --paths \u663e\u793a\u8f6f\u4ef6\u5b89\u88c5\u8def\u5f84 -d, --deps \u663e\u793a\u8f6f\u4ef6\u5b8c\u6574\u7684\u4f9d\u8d56\u5173\u7cfb\u56fe\uff08\u6709\u5411\u65e0\u73af\u56fe) -l, --long \u663e\u793a\u8f6f\u4ef6spec\u7684hash\u503c\u548c\u7248\u672c\u53f7 -f, --show-flags \u663e\u793a\u8f6f\u4ef6\u5b89\u88c5\u65f6\u7684\u7f16\u8bd1\u5668\u9009\u9879 -x, --explicit \u663e\u793a\u76f4\u63a5\u5b89\u88c5\u7684\u8f6f\u4ef6 -X, --implicit \u663e\u793a\u4f5c\u4e3a\u4f9d\u8d56\u5b89\u88c5\u7684\u8f6f\u4ef6 -v, --variants \u663e\u793a\u8f6f\u4ef6\u7684\u5b89\u88c5\u9009\u9879 software spec \u6307\u5b9a\u8f6f\u4ef6\u540d\u79f0\u53ca\u914d\u7f6e\u9009\u9879\uff0c\u67e5\u770b\u8f6f\u4ef6\u8be6\u7ec6\u4fe1\u606f\uff08hash\u503c\uff0c\u7248\u672c\uff0c\u4f9d\u8d56\uff0c\u5b89\u88c5\u9009\u9879\uff0c\u7f16\u8bd1\u9009\u9879\uff09 \u6ce8\uff1a spack find \u547d\u4ee4\u529f\u80fd\u4e0a\u7c7b\u4f3c module avail \uff0c\u4f46\u4e0d\u652f\u6301\u6a21\u7cca\u67e5\u8be2\u3002\u6bd4\u5982\u7528spack \u7684\u90e8\u7f72\u7684netcdf\u8f6f\u4ef6\u5206\u4e3a netcdf-c \u548c netcdf-fortran \uff0c\u5982\u679c spack find \u547d\u4ee4\u4e2d\u4ec5\u7ed9\u51fa netcdf \u662f\u65e0\u6cd5\u68c0\u7d22\u5230\u7684\u3002 \uff082\uff09\u52a0\u8f7dspack\u90e8\u7f72\u7684\u5e94\u7528 \u76ee\u524dFT2000+\u7cfb\u7edf\u4e0a\u5229\u7528spack\u90e8\u7f72\u7684\u5e94\u7528\uff0c\u6700\u7ec8\u90fd\u751f\u6210\u4e86modulefile\u6587\u4ef6\uff0c\u7528\u6237\u5176\u5b9e\u53ef\u7528\u6307\u5b9a $MODULEPATH \u540e\u5229\u7528 module load \u547d\u4ee4\u52a0\u8f7d\u76f8\u5e94\u7684\u6a21\u5757\uff1b\u4f46\u662f\u8fd9\u6837\u505a\u4e00\u6765\u589e\u52a0\u4e86\u9009\u62e9\u8f6f\u4ef6\u7684\u7e41\u7410\u7a0b\u5ea6\uff0c\u4e8c\u6765\u5bb9\u6613\u7834\u574f\u8f6f\u4ef6\u7684\u4f9d\u8d56\u8def\u5f84\u3002 \u56e0\u6b64\u5efa\u8bae\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u52a0\u8f7d\u5e94\u7528\uff08\u4ee5\u901a\u7528\u5730\u7403\u7cfb\u7edf\u6a21\u5f0fCESM\u7684\u4f9d\u8d56\u4e3a\u4f8b\uff09\uff0c\u5c06\u4ee5\u4e0b\u5185\u5bb9\u52a0\u5165 ~/.bashrc \u5373\u53ef\u5b8c\u6210\u73af\u5883\u52a0\u8f7d\uff1a source <(spack module tcl loads --dependencies /kkrtpmv) # gcc@9.3.0 source <(spack module tcl loads --dependencies /e4lfm5m) # cmake@3.18.4 source <(spack module tcl loads --dependencies /xw6ltva) # esmf@7.1.0r \u4e0a\u8ff0\u547d\u4ee4\u4e2d\u901a\u8fc7\u6dfb\u52a0 --dependencies \u53ef\u4ee5\u5b9e\u73b0\u540c\u65f6\u52a0\u8f7d esmf \u7684\u4f9d\u8d56(\u540c\u65f6\u5305\u542b\u4e86\u7f16\u8bd1CESM\u6240\u9700\u7684NETCDF\uff0cHDF5\uff0cMPICH\u7b49\u4f9d\u8d56) xw6ltva esmf@7.1.0r%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" 5olvqhx libxml2@2.9.10%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" wqdybbr libiconv@1.16%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" jfyvejj xz@5.2.5%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" 45oz4lo zlib@1.2.11%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" wstzt3c mpich@3.4.2%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" qescd7l netcdf-c@4.7.4%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" iewu4ps hdf5@1.10.7%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" phclqla libszip@2.1.1%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" cpi6jdd numactl@2.0.14%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" vxoao5f parallel-netcdf@1.12.1%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" e2epafa netcdf-fortran@4.5.3%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" uhgldx3 openblas@0.3.12%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" tolmlph xerces-c@3.2.3%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" kqjyzen curl@7.72.0%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" uzilztm libidn2@2.3.0%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" 3rk53br libunistring@0.9.10%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" kihy5an openssl@1.1.1h%gcc cflags=\"-O2 -fPIC\" cxxflags=\"-O2 -fPIC\" fflags=\"-O2 -fPIC\" \u7136\u540e\u6267\u884c source ~/.bashrc \u5b9e\u73b0\u5bf9\u73af\u5883\u7684\u52a0\u8f7d\u3002 spack@ln1:~$ module list Currently Loaded Modulefiles: 1) gmp-6.1.2-gcc-8.3.0-lx3wp4x 10) cmake-3.18.4-gcc-9.3.0-e4lfm5m 19) netcdf-c-4.7.4-gcc-9.3.0-qescd7l 2) isl-0.20-gcc-8.3.0-gqkr5oa 11) libiconv-1.16-gcc-9.3.0-wqdybbr 20) netcdf-fortran-4.5.3-gcc-9.3.0-e2epafa 3) mpfr-3.1.6-gcc-8.3.0-yip63bk 12) xz-5.2.5-gcc-9.3.0-jfyvejj 21) openblas-0.3.12-gcc-9.3.0-uhgldx3 4) mpc-1.1.0-gcc-8.3.0-ylgcxws 13) libxml2-2.9.10-gcc-9.3.0-5olvqhx 22) libunistring-0.9.10-gcc-9.3.0-3rk53br 5) zlib-1.2.11-gcc-8.3.0-ienx4xx 14) mpich-3.4.2-gcc-8.3.0-wstzt3c 23) libidn2-2.3.0-gcc-9.3.0-uzilztm 6) gcc-9.3.0-gcc-8.3.0-kkrtpmv 15) libszip-2.1.1-gcc-9.3.0-phclqla 24) curl-7.72.0-gcc-9.3.0-kqjyzen 7) ncurses-6.2-gcc-9.3.0-jnpnv6s 16) numactl-2.0.14-gcc-9.3.0-cpi6jdd 25) xerces-c-3.2.3-gcc-9.3.0-tolmlph 8) zlib-1.2.11-gcc-9.3.0-45oz4lo 17) hdf5-1.10.7-gcc-9.3.0-iewu4ps 26) esmf-7.1.0r-gcc-9.3.0-xw6ltva 9) openssl-1.1.1h-gcc-9.3.0-kihy5an 18) parallel-netcdf-1.12.1-gcc-9.3.0-vxoao5f \u6ce8\uff1a\u4ee5CESM\u4e3a\u4ee3\u8868\u7684\u4e00\u4e9b\u5e94\u7528\u5728\u7f16\u8bd1\u65f6\u6240\u7528\u7684\u73af\u5883\u4e0e\u52a0\u8f7d\u7684\u4f9d\u8d56\u6240\u7528\u7684\u7f16\u8bd1\u73af\u5883\u4fdd\u6301\u4e00\u81f4\uff0c\u800cspack\u7684\u8fd9\u79cd\u52a0\u8f7d\u65b9\u5f0f\u5f88\u597d\u5730\u6ee1\u8db3\u4e86\u8fd9\u79cd\u8981\u6c42\u3002","title":"spack HPC\u5e94\u7528\u90e8\u7f72\u7ba1\u7406\u5de5\u5177\u7b80\u4ecb"},{"location":"share/websites/","text":"\u76f8\u5173\u7f51\u7ad9\u5206\u4eab \u534e\u4e1c\u5e08\u8303\u5927\u5b66\u6f58\u5efa\u745c\u8001\u5e08\u6559\u5b66\u7f51\u7ad9 \u8ba1\u7b97\u673a\u6559\u80b2\u4e2d\u7f3a\u5931\u7684\u4e00\u8bfe CMake \u5165\u95e8\u5b9e\u6218 Pro Git \u4e2d\u6587\u7248\uff08\u7b2c\u4e8c\u7248\uff09","title":"\u7f51\u7ad9\u5206\u4eab"},{"location":"share/websites/#_1","text":"\u534e\u4e1c\u5e08\u8303\u5927\u5b66\u6f58\u5efa\u745c\u8001\u5e08\u6559\u5b66\u7f51\u7ad9 \u8ba1\u7b97\u673a\u6559\u80b2\u4e2d\u7f3a\u5931\u7684\u4e00\u8bfe CMake \u5165\u95e8\u5b9e\u6218 Pro Git \u4e2d\u6587\u7248\uff08\u7b2c\u4e8c\u7248\uff09","title":"\u76f8\u5173\u7f51\u7ad9\u5206\u4eab"},{"location":"tools/vimdiff-remote/","text":"vimdiff\u6bd4\u8f83&\u7f16\u8f91\u8fdc\u7a0b\u6587\u4ef6 \u4f7f\u7528vim\u5185\u5efa\u7684scp\u652f\u6301vimdiff: $vimdiff scp://demo@192.168.1.1//home/demo/remote_file.txt local_file.txt \u4f7f\u7528vim\u5185\u5efa\u7684scp\u652f\u6301\u7f16\u8f91\u8fdc\u7a0b\u6587\u4ef6\uff1a $vim scp://demo@192.168.1.1//home/demo/remote_file.txt","title":"vimdiff\u6bd4\u8f83\u7f16\u8f91\u8fdc\u7a0b\u6587\u4ef6"},{"location":"tools/vimdiff-remote/#vimdiff","text":"\u4f7f\u7528vim\u5185\u5efa\u7684scp\u652f\u6301vimdiff: $vimdiff scp://demo@192.168.1.1//home/demo/remote_file.txt local_file.txt \u4f7f\u7528vim\u5185\u5efa\u7684scp\u652f\u6301\u7f16\u8f91\u8fdc\u7a0b\u6587\u4ef6\uff1a $vim scp://demo@192.168.1.1//home/demo/remote_file.txt","title":"vimdiff\u6bd4\u8f83&amp;\u7f16\u8f91\u8fdc\u7a0b\u6587\u4ef6"}]}